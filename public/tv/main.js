import h from"../general.js";import _ from"../collection.js";var H=function(u,w,q){var b,p,E,f=T.genres,y=T.index;u.buttonMore?.setAttribute("data-display","0");var v=0,A=!1;if(T.count+w<T.len)v=T.count+w;else v=T.len,A=!0;if(q)for(var B=T.count;B<v;B+=1){var I=u.templateCollection.content.children[0].cloneNode(!0);u.view?.appendChild(I)}var J=u.view.children.length-v,z=T.count;while(z<v)b=f[y].id,p=f[y].name,E=`${p} Tv Series`,_.View.discover(h.API.getDiscover("tv","1",b,void 0,void 0,void 0),E,"tv",b,z,J,u),y+=1,z+=1;if(T.index=y,T.count=z,!A)u.buttonMore?.setAttribute("data-display","1")},T={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var u={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerSearch:document.getElementById("header_search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(u.templateCollection===null)throw Error("DOM.templateCollection is null");if(u.templateModal===null)throw Error("DOM.templateModal is null");if(u.headerPNav===null)throw Error("DOM.headerPNav is null");if(u.headerSearch===null)throw Error("DOM.headerSearch is null");if(u.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(u.main===null)throw Error("DOM.main is null");if(u.hero===null)throw Error("DOM.hero is null");if(u.heroTitle===null)throw Error("DOM.heroTitle is null");if(u.view===null)throw Error("DOM.view is null");if(u.buttonMore===null)throw Error("DOM.buttonMore is null");if(u.modal===null)throw Error("DOM.modal is null");h.Theme.init(),h.Route.init(u),window.addEventListener("popstate",function(){h.Route.onpopstate(u)}),u.headerButtonTheme.setAttribute("data-type",h.Theme.current),u.headerButtonTheme.addEventListener("click",h.Theme.onclick),u.headerPNav.firstElementChild.addEventListener("click",h.Nav.buttonNavOnclick),u.headerPNav.lastElementChild.addEventListener("focusout",h.Nav.navOnfocusout),u.headerSearch.children[1].addEventListener("click",function(p){u.headerSearch.reset()}),u.view.addEventListener("click",function(p){_.View.onclick(p.target,u,p)}),u.heroTitle.addEventListener("click",function(p){h.Hero.DOMTitleOnclick(p.target,u,p)}),u.modal.addEventListener("click",function(p){h.Modal.onclick(p.target,u)}),u.modal.addEventListener("change",function(p){h.Modal.onchange(p.target,u)}),u.buttonMore.addEventListener("click",function(){H(u,T.STEPS,!0)});var w=h.API.getGenres("tv"),q=h.API.getTrending("tv","1");q.then(function(p){console.info("trending: ",p)});var b=q.then(h.Hero.selectHero);b.then(function(p){console.info("hero: ",p)}),b.then(h.Hero.getHeroLogo).then(function(p){h.Hero.initDOMImgLogo(p,u.hero)}),b.then(function(p){if(p!==void 0)h.Hero.initDOM(p,u.hero)}),q.then(function(p){if(p?.results===void 0||p.results.length===0)throw Error("API.getTrending does not have data");var E=_.Collection.createDOMCollection("Week Trendings",p.results,"tv",_.Collection.TRENDING,void 0,u.templateCollection.content),f=u.view.children[0];f.insertAdjacentElement("beforebegin",E),f.remove()}),h.API.getPopular("tv","1").then(function(p){if(console.info("getPopular tv",p),p?.results===void 0||p.results.length===0)throw Error("API.getDiscover does not have data");var E=_.Collection.createDOMCollection("Popular TV Series",p.results,"tv",_.Collection.POPULAR,void 0,u.templateCollection.content),f=u.view.children[1];f.insertAdjacentElement("beforebegin",E),f.remove()}),h.API.getTopRated("tv","1").then(function(p){if(console.info("getTopRate tv",p),p?.results===void 0||p.results.length===0)throw Error("API.getTopRated does not have data");var E=_.Collection.createDOMCollection("Top Rated Tv Serie",p.results,"tv",_.Collection.TOP_RATED,void 0,u.templateCollection.content),f=u.view.children[2];f.insertAdjacentElement("beforebegin",E),f.remove()}),w.then(function(p){if(p===void 0||p.genres===void 0||p.genres.length===0)throw Error("API.getGenre does not have data");T.genres=p.genres,T.len=p.genres.length,h.Utils.randomPermutation(T.genres),H(u,4,!1)})});
