import y from"../general.js";var A=function(u,b,R){var I,h,B,p=E.genres,q=E.index;u.buttonMore?.setAttribute("data-display","0");var T=0,w=!1;if(E.count+b<E.len)T=E.count+b;else T=E.len,w=!0;if(R)for(var z=E.count;z<T;z+=1){var H=u.templateCollection.content.children[0].cloneNode(!0);u.view?.appendChild(H)}var J=u.view.children.length-T,v=E.count;while(v<T)I=p[q].id,h=p[q].name,B=`${h} Tv series`,y.View.discover(y.API.getDiscover("tv",I,"1"),B,"tv",v,J,u),q+=1,v+=1;if(E.index=q,E.count=v,!w)u.buttonMore?.setAttribute("data-display","1")},E={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var u={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerButtonNav:document.getElementById("header_button-nav"),headerNav:document.getElementById("header_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(u.templateCollection===null)throw Error("DOM.templateCollection is null");if(u.templateModal===null)throw Error("DOM.templateModal is null");if(u.headerButtonNav===null)throw Error("DOM.headerButtonNav is null");if(u.headerNav===null)throw Error("DOM.headerNav is null");if(u.headerButtonSearch===null)throw Error("DOM.headerButtonSearch is null");if(u.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(u.main===null)throw Error("DOM.main is null");if(u.hero===null)throw Error("DOM.hero is null");if(u.view===null)throw Error("DOM.view is null");if(u.buttonMore===null)throw Error("DOM.buttonMore is null");if(u.modal===null)throw Error("DOM.modal is null");y.Theme.init(),y.Route.init(u),window.addEventListener("popstate",function(){y.Route.onpopstate(u)}),u.headerButtonTheme.setAttribute("data-type",y.Theme.current),u.headerButtonTheme.addEventListener("click",y.Theme.onclick),u.headerButtonNav.addEventListener("click",y.Nav.buttonNavOnclick),u.headerNav.addEventListener("focusout",y.Nav.navOnfocusout),u.view.addEventListener("click",function(h){y.View.onclick(h.target,u,h)}),u.hero.lastElementChild.addEventListener("click",function(h){y.Hero.DOMTitleOnclick(h.target,u,h)}),u.modal.addEventListener("click",function(h){y.Modal.onclick(h.target,u)}),u.modal.addEventListener("change",function(h){y.Modal.onchange(h.target,u)}),u.buttonMore.addEventListener("click",function(){A(u,E.STEPS,!0)});var b=y.API.getGenres("tv"),R=y.API.getTrending("tv","1");R.then(function(h){console.info("trending: ",h)});var I=R.then(y.Hero.selectHero);I.then(function(h){console.info("hero: ",h)}),I.then(y.Hero.getHeroLogo).then(function(h){y.Hero.initDOMImgLogo(h,u.hero)}),I.then(function(h){if(h!==void 0)y.Hero.initDOM(h,u.hero)}),R.then(function(h){if(h?.results===void 0||h.results.length===0)throw Error("API.getTrending does not have data");var B=y.Collection.createDOMCollection("Week Trendings",h.results,"tv",y.Collection.TRENDING,u.templateCollection.content),p=u.view.children[0];p.insertAdjacentElement("beforebegin",B),p.remove()}),y.API.getPopular("tv","1").then(function(h){if(console.info("getPopular tv",h),h?.results===void 0||h.results.length===0)throw Error("API.getDiscover does not have data");var B=y.Collection.createDOMCollection("Popular Tv series",h.results,"tv",y.Collection.POPULAR,u.templateCollection.content),p=u.view.children[1];p.insertAdjacentElement("beforebegin",B),p.remove()}),y.API.getTopRated("tv","1").then(function(h){if(console.info("getTopRate tv",h),h?.results===void 0||h.results.length===0)throw Error("API.getTopRated does not have data");var B=y.Collection.createDOMCollection("Top rated tv serie",h.results,"tv",y.Collection.TOP_RATED,u.templateCollection.content),p=u.view.children[2];p.insertAdjacentElement("beforebegin",B),p.remove()}),b.then(function(h){if(h===void 0||h.genres===void 0||h.genres.length===0)throw Error("API.getGenre does not have data");E.genres=h.genres,E.len=h.genres.length,y.Utils.randomPermutation(E.genres),A(u,4,!1)})});
