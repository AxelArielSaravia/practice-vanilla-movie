import p from"../general.js";import T from"../collection.js";var F=function(u,v,_){var U,f,H,E=A.genres,w=A.index;u.buttonMore?.setAttribute("data-display","0");var q=0,z=!1;if(A.count+v<A.len)q=A.count+v;else q=A.len,z=!0;if(_)for(var B=A.count;B<q;B+=1){var I=u.templateCollection.content.children[0].cloneNode(!0);u.view?.appendChild(I)}var J=u.view.children.length-q,y=A.count;while(y<q)U=E[w].id,f=E[w].name,H=`${f} Tv Series`,T.View.discover(p.API.getDiscover("tv","1",U,void 0,void 0,void 0),H,"tv",U,y,J,u),w+=1,y+=1;if(A.index=w,A.count=y,!z)u.buttonMore?.setAttribute("data-display","1")},A={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var u={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(u.templateCollection===null)throw Error("DOM.templateCollection is null");if(u.templateModal===null)throw Error("DOM.templateModal is null");if(u.headerPNav===null)throw Error("DOM.headerPNav is null");if(u.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(u.main===null)throw Error("DOM.main is null");if(u.hero===null)throw Error("DOM.hero is null");if(u.heroTitle===null)throw Error("DOM.heroTitle is null");if(u.view===null)throw Error("DOM.view is null");if(u.buttonMore===null)throw Error("DOM.buttonMore is null");if(u.modal===null)throw Error("DOM.modal is null");p.Theme.init(),p.Route.init(u),window.addEventListener("popstate",function(){p.Route.onpopstate(u)}),u.headerButtonTheme.setAttribute("data-type",p.Theme.current),u.headerButtonTheme.addEventListener("click",p.Theme.onclick),u.headerPNav.firstElementChild.addEventListener("click",p.Nav.buttonNavOnclick),u.headerPNav.lastElementChild.addEventListener("focusout",p.Nav.navOnfocusout),u.view.addEventListener("click",function(f){T.View.onclick(f.target,u,f)}),u.heroTitle.addEventListener("click",function(f){p.Hero.DOMTitleOnclick(f.target,u,f)}),u.modal.addEventListener("click",function(f){p.Modal.onclick(f.target,u)}),u.modal.addEventListener("change",function(f){p.Modal.onchange(f.target,u)}),u.buttonMore.addEventListener("click",function(){F(u,A.STEPS,!0)});var v=p.API.getGenres("tv"),_=p.API.getTrending("tv","1");_.then(function(f){console.info("trending: ",f)});var U=_.then(p.Hero.selectHero);U.then(function(f){console.info("hero: ",f)}),U.then(p.Hero.getHeroLogo).then(function(f){p.Hero.initDOMImgLogo(f,u.hero)}),U.then(function(f){if(f!==void 0)p.Hero.initDOM(f,u.hero)}),_.then(function(f){if(f?.results===void 0||f.results.length===0)throw Error("API.getTrending does not have data");var H=T.Collection.createDOMCollection("Week Trendings",f.results,"tv",T.Collection.TRENDING,void 0,u.templateCollection.content),E=u.view.children[0];E.insertAdjacentElement("beforebegin",H),E.remove()}),p.API.getPopular("tv","1").then(function(f){if(console.info("getPopular tv",f),f?.results===void 0||f.results.length===0)throw Error("API.getDiscover does not have data");var H=T.Collection.createDOMCollection("Popular TV Series",f.results,"tv",T.Collection.POPULAR,void 0,u.templateCollection.content),E=u.view.children[1];E.insertAdjacentElement("beforebegin",H),E.remove()}),p.API.getTopRated("tv","1").then(function(f){if(console.info("getTopRate tv",f),f?.results===void 0||f.results.length===0)throw Error("API.getTopRated does not have data");var H=T.Collection.createDOMCollection("Top Rated Tv Serie",f.results,"tv",T.Collection.TOP_RATED,void 0,u.templateCollection.content),E=u.view.children[2];E.insertAdjacentElement("beforebegin",H),E.remove()}),v.then(function(f){if(f===void 0||f.genres===void 0||f.genres.length===0)throw Error("API.getGenre does not have data");A.genres=f.genres,A.len=f.genres.length,p.Utils.randomPermutation(A.genres),F(u,4,!1)})});
