import p from"../general.js";import R from"../collection.js";var J=function(f,A,q){var _,u,y,w=v.genres,B=v.index;f.buttonMore?.setAttribute("data-display","0");var z=0,H=!1;if(v.count+A<v.len)z=v.count+A;else z=v.len,H=!0;if(q)for(var I=v.count;I<z;I+=1){var K=f.templateCollection.content.children[0].cloneNode(!0);f.view?.appendChild(K)}var Q=f.view.children.length-z,E=v.count;while(E<z)_=w[B].id,u=w[B].name,y=`${u} Tv Series`,R.View.discover(p.API.getDiscover("tv","1",_,void 0,void 0,void 0),y,"tv",_,E,Q,f),B+=1,E+=1;if(v.index=B,v.count=E,!H)f.buttonMore?.setAttribute("data-display","1")},v={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var f={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(f.templateCollection===null)throw Error("DOM.templateCollection is null");if(f.templateModal===null)throw Error("DOM.templateModal is null");if(f.headerPNav===null)throw Error("DOM.headerPNav is null");if(f.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(f.main===null)throw Error("DOM.main is null");if(f.hero===null)throw Error("DOM.hero is null");if(f.heroTitle===null)throw Error("DOM.heroTitle is null");if(f.view===null)throw Error("DOM.view is null");if(f.buttonMore===null)throw Error("DOM.buttonMore is null");if(f.modal===null)throw Error("DOM.modal is null");p.Theme.init(),p.Route.init(f),window.addEventListener("popstate",function(){p.Route.onpopstate(f)}),f.headerButtonTheme.setAttribute("data-type",p.Theme.current),f.headerButtonTheme.addEventListener("click",p.Theme.onclick),f.headerPNav.firstElementChild.addEventListener("click",p.Nav.buttonNavOnclick),f.headerPNav.lastElementChild.addEventListener("focusout",p.Nav.navOnfocusout),f.view.addEventListener("click",function(u){R.View.onclick(u.target,f,u)}),f.heroTitle.addEventListener("click",function(u){p.Hero.DOMTitleOnclick(u.target,f,u)}),f.modal.addEventListener("click",function(u){p.Modal.onclick(u.target,f)}),f.modal.addEventListener("change",function(u){p.Modal.onchange(u.target,f)}),f.buttonMore.addEventListener("click",function(){J(f,v.STEPS,!0)});var A=p.API.getGenres("tv"),q=p.API.getTrending("tv","1");q.then(function(u){console.info("trending: ",u)});var _=q.then(p.Hero.selectHero);_.then(function(u){console.info("hero: ",u)}),_.then(p.Hero.getHeroLogo).then(function(u){p.Hero.initDOMImgLogo(u,f.hero)}),_.then(function(u){if(u!==void 0)p.Hero.initDOM(u,f.hero)}),q.then(function(u){if(u?.results===void 0||u.results.length===0)throw Error("API.getTrending does not have data");var y=R.Collection.createDOMCollection("Week Trendings",u.results,"tv",R.Collection.TRENDING,void 0,f.templateCollection.content),w=f.view.children[0];w.insertAdjacentElement("beforebegin",y),w.remove()}),p.API.getPopular("tv","1").then(function(u){if(console.info("getPopular tv",u),u?.results===void 0||u.results.length===0)throw Error("API.getDiscover does not have data");var y=R.Collection.createDOMCollection("Popular TV Series",u.results,"tv",R.Collection.POPULAR,void 0,f.templateCollection.content),w=f.view.children[1];w.insertAdjacentElement("beforebegin",y),w.remove()}),p.API.getTopRated("tv","1").then(function(u){if(console.info("getTopRate tv",u),u?.results===void 0||u.results.length===0)throw Error("API.getTopRated does not have data");var y=R.Collection.createDOMCollection("Top Rated Tv Serie",u.results,"tv",R.Collection.TOP_RATED,void 0,f.templateCollection.content),w=f.view.children[2];w.insertAdjacentElement("beforebegin",y),w.remove()}),A.then(function(u){if(u===void 0||u.genres===void 0||u.genres.length===0)throw Error("API.getGenre does not have data");v.genres=u.genres,v.len=u.genres.length,p.Utils.randomPermutation(v.genres),J(f,4,!1)})});
