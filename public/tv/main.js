import h from"../general.js";import _ from"../collection.js";var E=function(p,q,v){var b,u,U,I=w.genres,y=w.index;p.buttonMore?.setAttribute("data-display","0");var f=0,A=!1;if(w.count+q<w.len)f=w.count+q;else f=w.len,A=!0;if(v)for(var B=w.count;B<f;B+=1){var H=p.templateCollection.content.children[0].cloneNode(!0);p.view?.appendChild(H)}var J=p.view.children.length-f,z=w.count;while(z<f)b=I[y].id,u=I[y].name,U=`${u} Tv Series`,_.View.discover(h.API.getDiscover("tv","1",b,void 0,void 0,void 0),U,"tv",b,z,J,p),y+=1,z+=1;if(w.index=y,w.count=z,!A)p.buttonMore?.setAttribute("data-display","1")},w={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var p={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerSearch:document.getElementById("header_search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(p.templateCollection===null)throw Error("DOM.templateCollection is null");if(p.templateModal===null)throw Error("DOM.templateModal is null");if(p.headerPNav===null)throw Error("DOM.headerPNav is null");if(p.headerSearch===null)throw Error("DOM.headerSearch is null");if(p.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(p.main===null)throw Error("DOM.main is null");if(p.hero===null)throw Error("DOM.hero is null");if(p.heroTitle===null)throw Error("DOM.heroTitle is null");if(p.view===null)throw Error("DOM.view is null");if(p.buttonMore===null)throw Error("DOM.buttonMore is null");if(p.modal===null)throw Error("DOM.modal is null");h.Theme.init(),h.Route.init(p),window.addEventListener("popstate",function(){h.Route.onpopstate(p)}),p.headerButtonTheme.setAttribute("data-type",h.Theme.current),p.headerButtonTheme.addEventListener("click",h.Theme.onclick),p.headerPNav.firstElementChild.addEventListener("click",h.Nav.buttonNavOnclick),p.headerPNav.lastElementChild.addEventListener("focusout",h.Nav.navOnfocusout),p.headerSearch.children[1].addEventListener("click",function(u){p.headerSearch.reset()}),p.view.addEventListener("click",function(u){_.View.onclick(u.target,p,u)}),p.heroTitle.addEventListener("click",function(u){h.Hero.DOMTitleOnclick(u.target,p,u)}),p.modal.addEventListener("click",function(u){h.Modal.onclick(u.target,p)}),p.modal.addEventListener("change",function(u){h.Modal.onchange(u.target,p)}),p.buttonMore.addEventListener("click",function(){E(p,w.STEPS,!0)});var q=h.API.getGenres("tv"),v=h.API.getTrending("tv","1"),b=v.then(h.Hero.selectHero);b.then(h.Hero.getHeroLogo).then(function(u){h.Hero.initDOMImgLogo(u,p.hero)}),b.then(function(u){if(u!==void 0)h.Hero.initDOM(u,p.hero)}),v.then(function(u){if(u?.results===void 0||u.results.length===0)throw Error("API.getTrending does not have data");var U=_.Collection.createDOMCollection("Week Trendings",u.results,"tv",_.Collection.TRENDING,void 0,p.templateCollection.content),I=p.view.children[0];I.insertAdjacentElement("beforebegin",U),I.remove()}),h.API.getPopular("tv","1").then(function(u){if(u?.results===void 0||u.results.length===0)throw Error("API.getDiscover does not have data");var U=_.Collection.createDOMCollection("Popular TV Series",u.results,"tv",_.Collection.POPULAR,void 0,p.templateCollection.content),I=p.view.children[1];I.insertAdjacentElement("beforebegin",U),I.remove()}),h.API.getTopRated("tv","1").then(function(u){if(u?.results===void 0||u.results.length===0)throw Error("API.getTopRated does not have data");var U=_.Collection.createDOMCollection("Top Rated Tv Serie",u.results,"tv",_.Collection.TOP_RATED,void 0,p.templateCollection.content),I=p.view.children[2];I.insertAdjacentElement("beforebegin",U),I.remove()}),q.then(function(u){if(u===void 0||u.genres===void 0||u.genres.length===0)throw Error("API.getGenre does not have data");w.genres=u.genres,w.len=u.genres.length,h.Utils.randomPermutation(w.genres),E(p,4,!1)})});
