import A from"../general.js";import J from"../collection.js";function $(q,U,V){var K,z,I,H=B.genres,W=B.index;q.buttonMore?.setAttribute("data-display","0");var Q=0,Y=!1;if(B.count+U<B.len)Q=B.count+U;else Q=B.len,Y=!0;if(V)for(var Z=B.count;Z<Q;Z+=1){var w=q.templateCollection.content.children[0].cloneNode(!0);q.view?.appendChild(w)}var E=q.view.children.length-Q,X=B.count;while(X<Q)K=H[W].id,z=H[W].name,I=`${z} Tv Series`,J.View.discover(A.API.getDiscover("tv","1",K,void 0,void 0,void 0),I,"tv",K,X,E,q),W+=1,X+=1;if(B.index=W,B.count=X,!Y)q.buttonMore?.setAttribute("data-display","1")}var B={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var q={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerSearch:document.getElementById("header_search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(q.templateCollection===null)throw Error("DOM.templateCollection is null");if(q.templateModal===null)throw Error("DOM.templateModal is null");if(q.headerPNav===null)throw Error("DOM.headerPNav is null");if(q.headerSearch===null)throw Error("DOM.headerSearch is null");if(q.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(q.main===null)throw Error("DOM.main is null");if(q.hero===null)throw Error("DOM.hero is null");if(q.heroTitle===null)throw Error("DOM.heroTitle is null");if(q.view===null)throw Error("DOM.view is null");if(q.buttonMore===null)throw Error("DOM.buttonMore is null");if(q.modal===null)throw Error("DOM.modal is null");A.Theme.init(),A.Route.init(q),window.addEventListener("popstate",function(){A.Route.onpopstate(q)}),q.headerButtonTheme.setAttribute("data-type",A.Theme.current),q.headerButtonTheme.addEventListener("click",A.Theme.onclick),q.headerPNav.firstElementChild.addEventListener("click",A.Nav.buttonNavOnclick),q.headerPNav.lastElementChild.addEventListener("focusout",A.Nav.navOnfocusout),q.headerSearch.children[1].addEventListener("click",function(z){q.headerSearch.reset()}),q.view.addEventListener("click",function(z){J.View.onclick(z.target,q,z)}),q.heroTitle.addEventListener("click",function(z){A.Hero.DOMTitleOnclick(z.target,q,z)}),q.modal.addEventListener("click",function(z){A.Modal.onclick(z.target,q)}),q.modal.addEventListener("change",function(z){A.Modal.onchange(z.target,q)}),q.buttonMore.addEventListener("click",function(){$(q,B.STEPS,!0)});var U=A.API.getGenres("tv"),V=A.API.getTrending("tv","1"),K=V.then(A.Hero.selectHero);K.then(A.Hero.getHeroLogo).then(function(z){A.Hero.initDOMImgLogo(z,q.hero)}),K.then(function(z){if(z!==void 0)A.Hero.initDOM(z,q.hero)}),V.then(function(z){if(z?.results===void 0||z.results.length===0)throw Error("API.getTrending does not have data");var I=J.Collection.createDOMCollection("Week Trendings",z.results,"tv",J.Collection.TRENDING,void 0,q.templateCollection.content),H=q.view.children[0];H.insertAdjacentElement("beforebegin",I),H.remove()}),A.API.getPopular("tv","1").then(function(z){if(z?.results===void 0||z.results.length===0)throw Error("API.getDiscover does not have data");var I=J.Collection.createDOMCollection("Popular TV Series",z.results,"tv",J.Collection.POPULAR,void 0,q.templateCollection.content),H=q.view.children[1];H.insertAdjacentElement("beforebegin",I),H.remove()}),A.API.getTopRated("tv","1").then(function(z){if(z?.results===void 0||z.results.length===0)throw Error("API.getTopRated does not have data");var I=J.Collection.createDOMCollection("Top Rated Tv Serie",z.results,"tv",J.Collection.TOP_RATED,void 0,q.templateCollection.content),H=q.view.children[2];H.insertAdjacentElement("beforebegin",I),H.remove()}),U.then(function(z){if(z===void 0||z.genres===void 0||z.genres.length===0)throw Error("API.getGenre does not have data");B.genres=z.genres,B.len=z.genres.length,A.Utils.randomPermutation(B.genres),$(q,4,!1)})});
