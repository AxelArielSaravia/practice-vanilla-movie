import z from"./general.js";var U={COLL_TITLE:"4",COLL_BUTTON:"5"},H={TYPE_SBUTTON:"data-sbuttont",TRENDING:"0",POPULAR:"1",TOP_RATED:"2",DISCOVER:"3",DOMCollButtonOnclick(w){var f=w.parentElement.lastElementChild;const A=w.parentElement.children[1],q=w.parentElement.children[2];var x=w.getAttribute(H.TYPE_SBUTTON),k=f.clientWidth-f.clientWidth*6/100;if(f.scrollLeft-k<=0)A.setAttribute("data-display","0");else A.setAttribute("data-display","1");if(x==="0"){if(f.scrollBy(-k,0),f.scrollLeft-k<=0)A.setAttribute("data-display","0");q.setAttribute("data-display","1")}else{if(f.scrollBy(k,0),f.scrollLeft+k>=f.scrollWidth-f.clientWidth)q.setAttribute("data-display","0");A.setAttribute("data-display","1")}},createDOMCollection(w,f,A,q,x,k){var K=k.children[1].cloneNode(!0),N=k.children[2],J=K.children[0];if(J.insertAdjacentText("beforeend",w),q===H.TRENDING)J.setAttribute("href",`${window.location.origin}/trending?${z.Route.Q_MEDIA_TYPE}=${A}`);else if(q===H.POPULAR)J.setAttribute("href",`${window.location.origin}/popular?${z.Route.Q_MEDIA_TYPE}=${A}`);else if(q===H.TOP_RATED)J.setAttribute("href",`${window.location.origin}/top_rated?${z.Route.Q_MEDIA_TYPE}=${A}`);else if(q===H.DISCOVER){if(x!==void 0)J.setAttribute("href",`${window.location.origin}/discover?${z.Route.Q_MEDIA_TYPE}=${A}&${z.Route.Q_GENRE}=${x}&${z.Route.Q_TITLE}=${encodeURIComponent(w)}`)}for(var Q of f){const V=z.Item.createDOMItem(Q,A,N);K.lastElementChild.appendChild(V)}return K}},W={async discover(w,f,A,q,x,k,K){var N=await w;if(N?.results===void 0||N.results.length===0)throw Error("API.getTopRated does not have data");var J=H.createDOMCollection(f,N.results,A,H.DISCOVER,q,K.templateCollection.content),Q=K.view.children[k+x];Q.insertAdjacentElement("beforebegin",J),Q.remove()},onclick(w,f,A){var q=w.getAttribute("data-type");if(q===U.COLL_BUTTON)H.DOMCollButtonOnclick(w);else if(q===z.TYPE.ITEM){A.preventDefault();var x=w.getAttribute("data-media"),k=w.getAttribute("data-id");if(x!==null&&k!==null)z.Modal.open(x,k,f,!0);else console.error("View onclick bad mediaType or id")}}},Z={TYPE:U,Collection:H,View:W};export{Z as default};
