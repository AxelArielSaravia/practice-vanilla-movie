import K from"./general.js";var Z={COLL_TITLE:"4",COLL_BUTTON:"5"},N={TYPE_SBUTTON:"data-sbuttont",TRENDING:"0",POPULAR:"1",TOP_RATED:"2",DISCOVER:"3",DOMCollButtonOnclick(q){var k=q.parentElement.lastElementChild;const x=q.parentElement.children[1],A=q.parentElement.children[2];var J=q.getAttribute(N.TYPE_SBUTTON),z=k.clientWidth-k.clientWidth*6/100;if(k.scrollLeft-z<=0)x.setAttribute("data-display","0");else x.setAttribute("data-display","1");if(J==="0"){if(k.scrollBy(-z,0),k.scrollLeft-z<=0)x.setAttribute("data-display","0");A.setAttribute("data-display","1")}else{if(k.scrollBy(z,0),k.scrollLeft+z>=k.scrollWidth-k.clientWidth)A.setAttribute("data-display","0");x.setAttribute("data-display","1")}},createDOMCollection(q,k,x,A,J,z){var U=z.children[1].cloneNode(!0),W=z.children[2],Q=U.children[0];if(Q.insertAdjacentText("beforeend",q),A===N.TRENDING)Q.setAttribute("href",`${window.location.origin}/trending?${K.Route.Q_MEDIA_TYPE}=${x}`);else if(A===N.POPULAR)Q.setAttribute("href",`${window.location.origin}/popular?${K.Route.Q_MEDIA_TYPE}=${x}`);else if(A===N.TOP_RATED)Q.setAttribute("href",`${window.location.origin}/top_rated?${K.Route.Q_MEDIA_TYPE}=${x}`);else if(A===N.DISCOVER){if(J!==void 0)Q.setAttribute("href",`${window.location.origin}/discover?${K.Route.Q_MEDIA_TYPE}=${x}&${K.Route.Q_GENRE}=${J}&${K.Route.Q_TITLE}=${encodeURIComponent(q)}`)}for(var X of k){const $=K.Item.createDOMItem(X,x,W);U.lastElementChild.appendChild($)}return U}},f={async discover(q,k,x,A,J,z,U){var W=await q;if(W?.results===void 0||W.results.length===0)throw Error("API.getTopRated does not have data");var Q=N.createDOMCollection(k,W.results,x,N.DISCOVER,A,U.templateCollection.content),X=U.view.children[z+J];X.insertAdjacentElement("beforebegin",Q),X.remove()},onclick(q,k,x){var A=q.getAttribute("data-type");if(A===Z.COLL_BUTTON)N.DOMCollButtonOnclick(q);else if(A===K.TYPE.ITEM){x.preventDefault();var J=q.getAttribute("data-media"),z=q.getAttribute("data-id");if(J!==null&&z!==null)K.Modal.open(J,z,k,!0);else console.error("View onclick bad mediaType or id")}}},w={TYPE:Z,Collection:N,View:f};export{w as default};
