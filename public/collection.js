import G from"./general.js";var TYPE={COLL_TITLE:"4",COLL_BUTTON:"5"};var Collection={TYPE_SBUTTON:"data-sbuttont",TRENDING:"0",POPULAR:"1",TOP_RATED:"2",DISCOVER:"3",DOMCollButtonOnclick(target){var DOMSlider=target.parentElement.lastElementChild;const DOMButtonL=target.parentElement.children[1];const DOMButtonR=target.parentElement.children[2];var type=target.getAttribute(Collection.TYPE_SBUTTON);var scrollval=DOMSlider.clientWidth-DOMSlider.clientWidth*6/100;if(DOMSlider.scrollLeft-scrollval<=0){DOMButtonL.setAttribute("data-display","0")}else{DOMButtonL.setAttribute("data-display","1")}if(type==="0"){DOMSlider.scrollBy(-scrollval,0);if(DOMSlider.scrollLeft-scrollval<=0){DOMButtonL.setAttribute("data-display","0")}DOMButtonR.setAttribute("data-display","1")}else{DOMSlider.scrollBy(scrollval,0);if(DOMSlider.scrollLeft+scrollval>=DOMSlider.scrollWidth-DOMSlider.clientWidth){DOMButtonR.setAttribute("data-display","0")}DOMButtonL.setAttribute("data-display","1")}},createDOMCollection(header,data,mediaType,collectionType,genreId,DFCollection){var DOMCollection=DFCollection.children[1].cloneNode(true);var DOMTItem=DFCollection.children[2];var DOMTitle=DOMCollection.children[0];DOMTitle.insertAdjacentText("beforeend",header);if(collectionType===Collection.TRENDING){DOMTitle.setAttribute("href",`${window.location.origin}/trending?${G.Route.Q_MEDIA_TYPE}=${mediaType}`)}else if(collectionType===Collection.POPULAR){DOMTitle.setAttribute("href",`${window.location.origin}/popular?${G.Route.Q_MEDIA_TYPE}=${mediaType}`)}else if(collectionType===Collection.TOP_RATED){DOMTitle.setAttribute("href",`${window.location.origin}/top_rated?${G.Route.Q_MEDIA_TYPE}=${mediaType}`)}else if(collectionType===Collection.DISCOVER){if(genreId!==undefined){DOMTitle.setAttribute("href",`${window.location.origin}/discover?${G.Route.Q_MEDIA_TYPE}=${mediaType}&${G.Route.Q_GENRE}=${genreId}&${G.Route.Q_TITLE}=${encodeURIComponent(header)}`)}}for(var dataItem of data){const DOMItem=G.Item.createDOMItem(dataItem,mediaType,DOMTItem);DOMCollection.lastElementChild.appendChild(DOMItem)}return DOMCollection}};var View={async discover(DataPromise,title,mediaType,genre,i,base,DOM){var data=await DataPromise;if(data?.results===undefined||data.results.length===0){throw Error("API.getTopRated does not have data")}var DOMColl=Collection.createDOMCollection(title,data.results,mediaType,Collection.DISCOVER,genre,DOM.templateCollection.content);var DOMPos=DOM.view.children[base+i];DOMPos.insertAdjacentElement("beforebegin",DOMColl);DOMPos.remove()},onclick(target,DOM,e){var type=target.getAttribute("data-type");if(type===TYPE.COLL_BUTTON){Collection.DOMCollButtonOnclick(target)}else if(type===G.TYPE.ITEM){e.preventDefault();var mediaType=target.getAttribute("data-media");var id=target.getAttribute("data-id");if(mediaType!==null&&id!==null){G.Modal.open(mediaType,id,DOM,true)}else{console.error("View onclick bad mediaType or id")}}}};var collection_default={TYPE,Collection,View};export{collection_default as default};
