var S=function(_){if(_.ok)return _.json()};var t={getTrending(_="1"){return fetch(`${window.location.origin}/api/trending?page=${_}`).then(S)},getPopular(_,K="1"){return fetch(`${window.location.origin}/api/popular?type=${_}&page=${K}`).then(S)},getDiscover(_,K,U="1"){var q=`${window.location.origin}/api/discover?type=${_}&page=${U}`;if(K!==void 0)q=`${q}&genre=${K}`;return fetch(q).then(S)},getImages(_,K){return fetch(`${window.location.origin}/api/images?type=${K}&id=${_}`).then(S)},getGenres(_){return fetch(`${window.location.origin}/api/genres?type=${_}`).then(S)},getTopRated(_,K="1"){return fetch(`${window.location.origin}/api/toprated?type=${_}&page=${K}`).then(S)},get(_,K,U,q){var z=`${window.location.origin}/api/${_}?id=${K}`;if(U)z+="&similar";return fetch(z,q).then(S)},getCredits(_,K,U){return fetch(`${window.location.origin}/api/credits?type=${_}&id=${K}`,U).then(S)},getSeason(_,K,U){return fetch(`${window.location.origin}/api/season?id=${_}&n=${K}`,U).then(S)}},F=t;var m=function(_){return Math.floor(Math.random()*_)},r=function(_){var K=_.length;for(var U=0;U<K-1;U+=1){var q=U+Math.floor(Math.random()*(K-U)),z=_[U];_[U]=_[q],_[q]=z}};var a=function(_){T.abort(_),T=new AbortController,g.signal=T.signal};async function i(_,K,U,q,z,$){var x=await _;if(console.info(K,x),x?.results===void 0||x.results.length===0)throw Error("API.getTopRated does not have data");var Q=y.createDOMCollection(K,x.results,U,$.templateCollection.content),k=$.view.children[z+q];k.insertAdjacentElement("beforebegin",Q),k.remove()}var w={NAV_LINK:"0",COLL_TITLE:"4",COLL_BUTTON:"5",COLL_ITEM:"6",MODAL:"8",MODAL_CLOSE:"9",MODAL_GENRE:"10",MODAL_COMPANY:"11",MODAL_CAST:"12",MODAL_C_MORE:"13",MODAL_SEASON_N:"14"},L={MAX:15,STEPS:5,len:0,count:7,itv:0,tvGenres:null,imov:0,movieGenres:null},j={current:"dark",DARK:"dark",LIGHT:"light",init(){var _=localStorage.getItem("theme");if(_==="dark"||_==="light")j.current=_;else{if(window.matchMedia!==void 0&&window.matchMedia("(prefers-color-scheme: dark)").matches)j.current=j.DARK;else j.current=j.LIGHT;localStorage.setItem("theme",j.current)}document.firstElementChild?.setAttribute("class",j.current)},change(_){localStorage.setItem("theme",_),document.firstElementChild?.setAttribute("class",j.current)},onclick(_){var K=_.currentTarget;if(K===null)return;if(j.current===j.DARK)j.current=j.LIGHT;else j.current=j.DARK;K.setAttribute("data-type",j.current),j.change(j.current)}},b={ATTR_SELECTED:"data-selected",ATTR_LINK_TYPE:"data-linkt",HIDDEN:"0",SHOW:"1",buttonNavOnclick(_){var K=_.currentTarget,U=K.nextElementSibling;if(U.getAttribute(b.ATTR_SHOW)===b.HIDDEN)U.setAttribute(b.ATTR_SHOW,b.SHOW),U.firstElementChild.firstElementChild.focus();else U.setAttribute(b.ATTR_SHOW,b.HIDDEN)},navOnfocusout(_){var K=_.relatedTarget;if(K===null||K.getAttribute("data-type")!==w.NAV_LINK){var U=_.currentTarget;U.setAttribute(b.ATTR_SHOW,b.HIDDEN)}},navOnclick(_){var K=_.target;if(K.getAttribute("data-type")===w.NAV_LINK){var U=K.getAttribute(b.ATTR_LINK_TYPE),q=_.currentTarget,z=q.previousElementSibling;z.replaceChildren(),z.insertAdjacentText("beforeend",K.textContent),q.setAttribute(b.ATTR_SHOW,b.HIDDEN),q.setAttribute(b.ATTR_SELECTED,U),_.preventDefault()}}},v={select(_){return _[m(_.length)]},selectHero(_){if(_){if(!_.results||_.results.length===0)throw Error("trending.results does not have data");return v.select(_.results)}},async getHeroLogo(_){if(_===void 0)return;var{id:K,media_type:U}=_,q=await F.getImages(K,U);if(q.logos.length>0)return q.logos[0].file_path;else return},initDOMImgLogo(_,K){var U=K.lastElementChild.firstElementChild;if(_!==void 0)U.firstElementChild.setAttribute("data-opacity","0"),U.lastElementChild.setAttribute("data-display","1"),U.lastElementChild.setAttribute("src",`https://image.tmdb.org/t/p/w300${_}`)},initDOM(_,K){var U=K.firstElementChild.firstElementChild,q=K.lastElementChild,z=q.firstElementChild.firstElementChild,$=q.lastElementChild;if(U.setAttribute("data-display","1"),U.setAttribute("src",`https://image.tmdb.org/t/p/w1280${_.backdrop_path}`),_.media_type==="tv")z.insertAdjacentText("beforeend",_.name);else z.insertAdjacentText("beforeend",_.title);q.setAttribute("data-media",_.media_type),q.setAttribute("data-id",_.id),$.insertAdjacentText("beforeend",_.overview)}},y={TYPE_SBUTTON:"data-sbuttont",topScroll:0,DOMCollButtonOnclick(_){var K=_.parentElement.lastElementChild;const U=_.parentElement.children[1],q=_.parentElement.children[2];var z=_.getAttribute(y.TYPE_SBUTTON),$=K.clientWidth-K.clientWidth*6/100;if(K.scrollLeft-$<=0)U.setAttribute("data-display","0");else U.setAttribute("data-display","1");if(z==="0"){if(K.scrollBy(-$,0),K.scrollLeft-$<=0)U.setAttribute("data-display","0");q.setAttribute("data-display","1")}else{if(K.scrollBy($,0),K.scrollLeft+$>=K.scrollWidth-K.clientWidth)q.setAttribute("data-display","0");U.setAttribute("data-display","1")}},async setItemImage(_,K,U){var q=await _,z=K.firstElementChild;if(q===void 0||q.backdrops===void 0||q.backdrops.length===0){if(U!==null&&U.length>0)z.setAttribute("src",`https://image.tmdb.org/t/p/w400${U}`),z.setAttribute("data-display","1"),K.lastElementChild?.setAttribute("data-opacity","0")}else{var $=q.backdrops[0];z.setAttribute("src",`https://image.tmdb.org/t/p/w400${$.file_path}`),z.setAttribute("data-display","1"),K.lastElementChild?.setAttribute("data-opacity","0")}},createDOMCollection(_,K,U,q){var z=q.children[1].cloneNode(!0),$=q.children[2],x=z.children[0];x.insertAdjacentText("beforeend",_);for(var Q of K){const k=$.cloneNode(!0);k.setAttribute("data-id",Q.id);let J,Z;if(U!==void 0)Z=U;else Z=Q.media_type;if(Z==="movie")J=Q.title;else J=Q.name;k.setAttribute("title",J),k.setAttribute("data-media",Z),k.lastElementChild.insertAdjacentText("beforeend",J),k.firstElementChild.setAttribute("alt",J),y.setItemImage(F.getImages(Q.id,Z),k,Q.backdrop_path),z.lastElementChild.appendChild(k)}return z}},T=new AbortController,g={signal:T.signal},W={MAX_SIMILAR:4,fragment:document.createDocumentFragment(),id:"",mediaType:"tv",creditsLoaded:!1,dataLoaded:!1,similarLoaded:!1,seasonLoaded:!1,seasonNumber:-1,async getCredit(_,K,U,q){var z=await F.getCredits(_,K,g);if(console.info("credits:",z),z===void 0)return;W.DOMMCreditsFill(z,U,q),W.creditsLoaded=!0},async getData(_,K,U){var q=await F.get(_,K,!1,g);if(console.info("data:",q),q===void 0)return;if(_==="tv"){var z=U.modal.children[0];W.getCredit(_,K,z,U.templateModal.content),W.getSimilar(_,K,z,U.templateModal.content);var $=q.seasons;if($.length>0)W.seasonNumber=$[0].season_number,W.getSeason(K,W.seasonNumber,z,U.templateModal.content);else W.seasonNumber=-1;W.DOMMTvFill(q,U)}else{var x=U.modal.children[1];W.getCredit(_,K,x,U.templateModal.content),W.getSimilar(_,K,x,U.templateModal.content),W.DOMMMovieFill(q,U)}W.dataLoaded=!0},async getSeason(_,K,U,q){var z=await F.getSeason(_,K,g);if(console.info("season:",z),z===void 0)return;var $=U.children[3].children[6],x=q.children[8],Q=$.firstElementChild.firstElementChild,k=$.children[1],J=$.children[2],Z=$.children[3];if(Q.textContent=`${z.episodes.length} episodes`,k.textContent=z.name,J.textContent=z.overview,z.episodes.length>0){var V=z.episodes;for(var X of V){var R=x.cloneNode(!0),H=R.children[0],Y=R.children[1].firstElementChild,B=R.children[1].lastElementChild,A=R.children[2],f=R.children[3],u=R.children[4];if(X.still_path!==null)H.setAttribute("src",`https://image.tmdb.org/t/p/w400${X.still_path}`),H.setAttribute("alt",X.name);if(Y.textContent=X.air_date,B.textContent=X.episode_number,A.textContent=X.name,X.runtime!==null)f.textContent=`${X.runtime} min`;u.textContent=X.overview,W.fragment.appendChild(R)}Z.replaceChildren(W.fragment)}else Z.replaceChildren();W.seasonLoaded=!0},async getSimilar(_,K,U,q){var z=await F.get(_,K,!0,g);if(console.info("similars:",z),z===void 0)return;W.DOMMSimilarFill(z,_,U,q),W.similarLoaded=!0},orderCredits(_){if(_.length<2)return _.length;var K=0,U=0,q=0,z=1;for(var $=1;$<_.length;$+=1){var x=_[$];if(x.department!=="Crew"){while(K<=U){if(K<U)q=Math.floor((K+U)/2);else q=K;if(x.department<_[q].department)U=q-1;else if(x.department>_[q].department)K=q+1;else if(x.job<_[q].job)U=q-1;else K=q+1}if(K!==z)_.copyWithin(K+1,K,z);_[K]=x,K=0,U=z,z+=1}}return z},DOMMSimilarFill(_,K,U,q){var z=U.children[3].children.length,$=U.children[3].children[z-2],x=$.lastElementChild,Q=q.children[5],k=_.results;if(k!=null&&0<k.length){$.setAttribute("data-display","1");var J=0;while(J<k.length){var Z=k[J],V=Q.cloneNode(!0);V.setAttribute("data-id",Z.id);let H;if(K==="movie")H=Z.title;else H=Z.name;V.setAttribute("title",H),V.setAttribute("data-media",K);var{firstElementChild:X,lastElementChild:R}=V;if(X.setAttribute("alt",H),R.insertAdjacentText("beforeend",H),Z.poster_path!=null&&Z.poster_path.length>0)X.setAttribute("src",`https://image.tmdb.org/t/p/w200${Z.poster_path}`);else X.setAttribute("data-display","0"),R.setAttribute("data-opacity","1");W.fragment.appendChild(V),J+=1}x.appendChild(W.fragment)}},DOMMCreditsFill(_,K,U){var q=K.children[3].children[5],z=K.children[3].lastElementChild,$=U.children[0],x=U.children[1],Q=U.children[2],k=U.children[3],J=U.children[4],Z,V,X,R=_.cast;if(R.length>0){X=Q.cloneNode(!0),X.setAttribute("data-more","0"),X.firstElementChild.textContent="Cast:";for(var H=0;H<R.length;H+=1){var Y=R[H];V=$.cloneNode(!1),V.setAttribute("data-id",Y.id),V.setAttribute("data-type",w.MODAL_CAST),V.textContent=Y.name,X.appendChild(V)}if(R.length>3){var B=J.cloneNode(!1);B.setAttribute("class","more"),B.setAttribute("data-type",w.MODAL_C_MORE),B.textContent="more",X.appendChild(B)}q.appendChild(X),X=void 0}if(_.crew.length>0){var A=_.crew,f=W.orderCredits(A),u="",N="";for(var G=0;G<f;G+=1){var h=A[G];if(h.department!==u){if(Z!==void 0){if(X!==void 0)Z?.appendChild(X),X=void 0;W.fragment.appendChild(Z)}u=h.department,Z=x.cloneNode(!0),Z.firstElementChild.textContent=u}if(h.job!==N){if(X!==void 0)Z?.appendChild(X);N=h.job,X=Q.cloneNode(!0),X.firstElementChild.textContent=`${N}:`}if(u==="Directing"&&(N==="Director"||N==="Series Director"||N==="Action Director"))V=$.cloneNode(!0),V.setAttribute("data-id",h.id),V.setAttribute("data-type",w.MODAL_CAST);else V=k.cloneNode(!1);V.textContent=h.name,X.appendChild(V)}if(Z!==void 0){if(X!==void 0)Z?.appendChild(X);W.fragment.appendChild(Z)}z?.appendChild(W.fragment)}},DOMMMovieFill(_,K){var U=K.modal,q=K.templateModal.content.children[2],X=K.templateModal.content.children[0],z=U.children[1],$=z.children[1].firstElementChild.firstElementChild,x=z.children[3],Q=x.children[0],k=x.children[1],J=x.children[2],Z=x.children[3],V=x.children[4],X=K.templateModal.content.children[0],R=K.templateModal.content.children[3],H=K.templateModal.content.children[4],Y;if(Q.textContent=_.title,Z.textContent=_?.overview,_.runtime!==void 0)J.textContent=`${_.runtime} min`;if(_?.backdrop_path!=null)$.setAttribute("src",`https://image.tmdb.org/t/p/w780${_.backdrop_path}`),$.setAttribute("alt",_.title),$.setAttribute("data-display","1");if(_.genres.length>0){for(var B of _.genres)Y=X.cloneNode(!0),Y.textContent=B.name,Y.setAttribute("data-id",B.id),Y.setAttribute("data-type",w.MODAL_GENRE),W.fragment.appendChild(Y);k.appendChild(W.fragment)}var A=q.cloneNode(!0);A.firstElementChild.textContent="Popularity:",Y=R.cloneNode(!0),Y.textContent=String(_.popularity),A.appendChild(Y),V?.appendChild(A);var f=q.cloneNode(!0);if(f.firstElementChild.textContent="Release Date:",Y=R.cloneNode(!0),Y.textContent=_.release_date,f.appendChild(Y),V?.appendChild(f),_.spoken_languages.length>0){var u=q.cloneNode(!0);u.firstElementChild.textContent="Languages:";for(var N of _.spoken_languages){if(Y=R.cloneNode(!0),N.name.length>0)Y.textContent=N.name;else Y.textContent=N.english_name;u.appendChild(Y)}V?.appendChild(u)}if(_.production_countries.length>0){var G=q.cloneNode(!0);G.firstElementChild.textContent="Countries:";for(var h of _.production_countries)Y=R.cloneNode(!0),Y.textContent=h.name,G.appendChild(Y);V?.appendChild(G)}if(_.production_companies.length>0){var G=q.cloneNode(!0);G.setAttribute("data-more","0"),G.firstElementChild.textContent="Companies:";for(var c of _.production_companies)Y=X.cloneNode(!0),X.setAttribute("data-type",w.MODAL_COMPANY),X.setAttribute("data-id",c.id),Y.textContent=c.name,G.appendChild(Y);if(_.production_companies.length>3){var E=H.cloneNode(!1);E.setAttribute("class","more"),E.setAttribute("data-type",w.MODAL_C_MORE),E.textContent="more",G.appendChild(E)}V?.appendChild(G)}},DOMMTvFill(_,K){var U=K.modal,q=K.templateModal.content.children[2],R=K.templateModal.content.children[0],z=U.children[0],$=z.children[1].firstElementChild.firstElementChild,x=z.children[3],Q=x.children[0],k=x.children[1],J=x.children[2],Z=x.children[3],V=x.children[4],X=x.children[6],R=K.templateModal.content.children[0],H=K.templateModal.content.children[3],Y=K.templateModal.content.children[4],B=K.templateModal.content.children[6],A=K.templateModal.content.children[7],f;if(Q.textContent=_.name,Z.textContent=_?.overview,J.textContent=`${_.number_of_episodes} episodes, ${_.number_of_seasons} seasons`,_?.backdrop_path!=null)$.setAttribute("src",`https://image.tmdb.org/t/p/w780${_.backdrop_path}`),$.setAttribute("alt",_.name),$.setAttribute("data-display","1");if(_.genres.length>0){for(var u of _.genres)f=R.cloneNode(!0),f.textContent=u.name,f.setAttribute("data-id",u.id),f.setAttribute("data-type",w.MODAL_GENRE),W.fragment.appendChild(f);k.appendChild(W.fragment)}var N=q.cloneNode(!0);N.firstElementChild.textContent="Popularity:",f=H.cloneNode(!0),f.textContent=String(_.popularity),N.appendChild(f),V?.appendChild(N);var G=q.cloneNode(!0);if(G.firstElementChild.textContent="First Air Date:",f=H.cloneNode(!0),f.textContent=_.first_air_date,G.appendChild(f),V.appendChild(G),_.spoken_languages.length>0){var h=q.cloneNode(!0);h.firstElementChild.textContent="Languages:";for(var c of _.spoken_languages){if(f=H.cloneNode(!0),c.name.length>0)f.textContent=c.name;else f.textContent=c.english_name;h.appendChild(f)}V?.appendChild(h)}if(_.production_countries.length>0){var E=q.cloneNode(!0);E.firstElementChild.textContent="Countries:";for(var o of _.production_countries)f=H.cloneNode(!0),f.textContent=o.name,E.appendChild(f);V?.appendChild(E)}if(_.production_companies.length>0){var E=q.cloneNode(!0);E.setAttribute("data-more","0"),E.firstElementChild.textContent="Companies:";for(var n of _.production_companies)f=R.cloneNode(!0),R.setAttribute("data-type",w.MODAL_COMPANY),R.setAttribute("data-id",n.id),f.textContent=n.name,E.appendChild(f);if(_.production_companies.length>3){var I=Y.cloneNode(!1);I.setAttribute("class","more"),I.setAttribute("data-type",w.MODAL_C_MORE),I.textContent="more",E.appendChild(I)}V?.appendChild(E)}if(W.seasonNumber!==-1){var C=_.seasons,P=B.content.cloneNode(!0),d=P.children[0].firstElementChild,O=P.children[0].lastElementChild,D=P.children[1],M=P.children[2];X.setAttribute("data-display","1"),d.textContent=`${C[0].episode_count} episodes`,D.textContent=C[0].name,M.textContent=C[0].overview;for(let s=0;s<C.length;s+=1){var l=C[s].season_number,p=A.cloneNode(!1);p.textContent=`Season ${l}`,p.setAttribute("value",String(l)),O.appendChild(p)}X.appendChild(P)}},close(_){if(!W.dataLoaded||!W.creditsLoaded||!W.similarLoaded||!W.seasonLoaded)a("The modal is closed");var K;if(W.mediaType==="tv")K=_.modal.children[0];else K=_.modal.children[1];var U=K.children[1].firstElementChild?.firstElementChild,q=K.children[3];U?.setAttribute("data-display","0"),U?.setAttribute("src",""),U?.setAttribute("alt","");var z=q.children.length;if(q.children[0].replaceChildren(),q.children[1].replaceChildren(),q.children[2].replaceChildren(),q.children[3].replaceChildren(),q.children[4].replaceChildren(),q.children[5].replaceChildren(),q.lastElementChild.replaceChildren(),W.mediaType==="tv"){var $=q.children[6];$.replaceChildren(),$.setAttribute("data-display","0")}var x=q.children[z-2];x.setAttribute("data-display","0"),x.lastElementChild.replaceChildren(),_.main.style.removeProperty("transform"),_.main.style.setProperty("position","relative"),_.modal.setAttribute("data-display","0"),document.firstElementChild.scrollTop=y.topScroll,W.seasonNumber=-1,W.id="",W.dataLoaded=!1,W.creditsLoaded=!1,W.similarLoaded=!1,W.seasonLoaded=!1},open(_,K,U){y.topScroll=document.firstElementChild.scrollTop,document.firstElementChild.scrollTop=0,W.mediaType=_,W.id=K,U.modal.setAttribute("data-display","1"),U.modal.setAttribute("data-select",_),U.main.style.setProperty("transform",`translateY(-${y.topScroll}px)`),U.main.style.setProperty("position","fixed"),W.getData(_,K,U)}};window.addEventListener("DOMContentLoaded",function(){var _={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerButtonNav:document.getElementById("header_button-nav"),headerNav:document.getElementById("header_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(_.templateCollection===null)throw Error("DOM.templateCollection is null");if(_.templateModal===null)throw Error("DOM.templateModal is null");if(_.headerButtonNav===null)throw Error("DOM.headerButtonNav is null");if(_.headerNav===null)throw Error("DOM.headerNav is null");if(_.headerButtonSearch===null)throw Error("DOM.headerButtonSearch is null");if(_.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(_.main===null)throw Error("DOM.main is null");if(_.hero===null)throw Error("DOM.hero is null");if(_.view===null)throw Error("DOM.view is null");if(_.buttonMore===null)throw Error("DOM.buttonMore is null");if(_.modal===null)throw Error("DOM.modal is null");j.init(),_.headerButtonTheme.setAttribute("data-type",j.current),_.headerButtonTheme.addEventListener("click",j.onclick),_.headerButtonNav.addEventListener("click",b.buttonNavOnclick),_.headerNav.addEventListener("focusout",b.navOnfocusout),_.headerNav.addEventListener("click",b.navOnclick),_.view.addEventListener("click",function($){var x=$.target,Q=x.getAttribute("data-type");if(Q===w.COLL_BUTTON)y.DOMCollButtonOnclick(x);else if(Q===w.COLL_ITEM){var k=x?.getAttribute("data-media"),J=x?.getAttribute("data-id");W.open(k,J,_)}}),_.hero.lastElementChild.addEventListener("click",function($){var x=$.target,Q=x?.getAttribute("data-id");if(Q!==void 0){var k=x?.getAttribute("data-media");W.open(k,Q,_)}}),_.modal.addEventListener("click",function($){var x=$.target,Q=x.getAttribute("data-type");if(Q===w.MODAL||Q===w.MODAL_CLOSE)W.close(_);else if(Q===w.MODAL_C_MORE)x.parentElement.setAttribute("data-more","1");else if(Q===w.COLL_ITEM){var k=x?.getAttribute("data-id"),J=x?.getAttribute("data-media");W.close(_),W.open(J,k,_)}else if(Q===w.MODAL_SEASON_N){var Z=Number(x.value);if(Z===NaN)return;if(Z!==W.seasonNumber)W.seasonNumber=Z,W.getSeason(W.id,Z,_.modal.children[0],_.templateModal.content)}});var K=F.getTrending("1");K.then(function($){console.info("trending: ",$)});var U=K.then(v.selectHero);U.then(function($){console.info("hero: ",$)}),U.then(v.getHeroLogo).then(function($){v.initDOMImgLogo($,_.hero)}),U.then(function($){if($!==void 0)v.initDOM($,_.hero)}),K.then(function($){if($?.results===void 0||$.results.length===0)throw Error("API.getTrending does not have data");var x=y.createDOMCollection("Week Trendings",$.results,void 0,_.templateCollection.content),Q=_.view.children[0];Q.insertAdjacentElement("beforebegin",x),Q.remove()}),F.getPopular("movie","1").then(function($){if(console.info("getPopular movie",$),$?.results===void 0||$.results.length===0)throw Error("API.getDiscover does not have data");var x=y.createDOMCollection("Popular Movies",$.results,"movie",_.templateCollection.content),Q=_.view.children[1];Q.insertAdjacentElement("beforebegin",x),Q.remove()}),F.getPopular("tv","1").then(function($){if(console.info("getPopular tv",$),$?.results===void 0||$.results.length===0)throw Error("API.getDiscover does not have data");var x=y.createDOMCollection("Popular Tv series",$.results,"tv",_.templateCollection.content),Q=_.view.children[2];Q.insertAdjacentElement("beforebegin",x),Q.remove()}),F.getTopRated("movie","1").then(function($){if(console.info("getTopRate movie",$),$?.results===void 0||$.results.length===0)throw Error("API.getTopRated does not have data");var x=y.createDOMCollection("Top rated movie",$.results,"movie",_.templateCollection.content),Q=_.view.children[3];Q.insertAdjacentElement("beforebegin",x),Q.remove()}),F.getTopRated("tv","1").then(function($){if(console.info("getTopRate tv",$),$?.results===void 0||$.results.length===0)throw Error("API.getTopRated does not have data");var x=y.createDOMCollection("Top rated tv serie",$.results,"tv",_.templateCollection.content),Q=_.view.children[4];Q.insertAdjacentElement("beforebegin",x),Q.remove()});var q=F.getGenres("movie"),z=F.getGenres("tv");Promise.all([q,z]).then(function($){if(console.info("movie genres",$[0]),console.info("tv genres",$[1]),$[0]===void 0||$[0].genres===void 0||$[0].genres.length===0)throw Error("API.getGenre does not have data");if($[1]===void 0||$[1].genres===void 0||$[1].genres.length===0)throw Error("API.getGenre does not have data");var x=$[0].genres,Q=$[1].genres;if(L.tvGenres=Q,L.movieGenres=x,x.length+Q.length<L.MAX)L.len=x.length+Q.length;else L.len=L.MAX;if(console.info("Collection:",L),_.buttonMore?.setAttribute("data-display","1"),x.length>1)r(x);if(Q.length>1)r(Q);var k,J,Z,V,X=0,R=0;for(let H=0;H<2;H+=1){if(Math.random()<0.5)J=x[X].id,Z=x[X].name,k="movie",V=`${Z} Movies`,X+=1,L.imov+=1;else J=Q[R].id,Z=Q[R].name,k="tv",V=`${Z} Tv series`,R+=1,L.itv+=1;i(F.getDiscover(k,J,"1"),V,k,H,5,_)}}),_.buttonMore.addEventListener("click",function($){var x,Q,k,J,Z=L.movieGenres,V=L.tvGenres,X=L.itv,R=L.imov,H=0;_.buttonMore?.setAttribute("data-display","0");var Y=0,B=!1;if(L.count+L.STEPS<L.len)Y=L.count+L.STEPS;else Y=L.len,B=!0;for(var A=L.count;A<Y;A+=1){var f=_.templateCollection.content.children[0].cloneNode(!0);_.view?.appendChild(f)}for(var A=L.count;A<Y;A+=1){if(X<V.length&&R<Z.length){if(Math.random()<0.5)H=1}else if(tv<V.length)H=1;if(H===0)Q=Z[R].id,k=Z[R].name,x="movie",J=`${k} Movies`,R+=1,L.imov+=1;else Q=V[X].id,k=V[X].name,x="tv",J=`${k} Tv series`,X+=1,L.itv+=1;L.count+=1,i(F.getDiscover(x,Q,"1"),J,x,A,_.view.children.length-Y,_)}if(!B)_.buttonMore?.setAttribute("data-display","1")})});
