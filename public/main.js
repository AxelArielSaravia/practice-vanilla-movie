var S=function(_){if(_.ok)return _.json()};var t={getTrending(_="1"){return fetch(`${window.location.origin}/api/trending?page=${_}`).then(S)},getPopular(_,x="1"){return fetch(`${window.location.origin}/api/popular?type=${_}&page=${x}`).then(S)},getDiscover(_,x,K="1"){var $=`${window.location.origin}/api/discover?type=${_}&page=${K}`;if(x!==void 0)$=`${$}&genre=${x}`;return fetch($).then(S)},getImages(_,x){return fetch(`${window.location.origin}/api/images?type=${x}&id=${_}`).then(S)},getGenres(_){return fetch(`${window.location.origin}/api/genres?type=${_}`).then(S)},getTopRated(_,x="1"){return fetch(`${window.location.origin}/api/toprated?type=${_}&page=${x}`).then(S)},get(_,x,K,$){var z=`${window.location.origin}/api/${_}?id=${x}`;if(K)z+="&similar";return fetch(z,$).then(S)},getCredits(_,x,K){return fetch(`${window.location.origin}/api/credits?type=${_}&id=${x}`,K).then(S)},getSeason(_,x,K){return fetch(`${window.location.origin}/api/season?id=${_}&n=${x}`,K).then(S)}},F=t;var i=function(_){return Math.floor(Math.random()*_)},r=function(_){var x=_.length;for(var K=0;K<x-1;K+=1){var $=K+Math.floor(Math.random()*(x-K)),z=_[K];_[K]=_[$],_[$]=z}};var a=function(_){T.abort(_),T=new AbortController,g.signal=T.signal};async function o(_,x,K,$,z,U){var q=await _;if(console.info(x,q),q?.results===void 0||q.results.length===0)throw Error("API.getTopRated does not have data");var Q=y.createDOMCollection(x,q.results,K,U.templateCollection.content),Z=U.view.children[z+$];Z.insertAdjacentElement("beforebegin",Q),Z.remove()}var G={NAV_LINK:"0",COLL_TITLE:"4",COLL_BUTTON:"5",COLL_ITEM:"6",MODAL:"8",MODAL_CLOSE:"9",MODAL_GENRE:"10",MODAL_COMPANY:"11",MODAL_CAST:"12",MODAL_C_MORE:"13",MODAL_SEASON_N:"14"},A={MAX:15,STEPS:5,len:0,count:7,itv:0,tvGenres:null,imov:0,movieGenres:null},j={current:"dark",DARK:"dark",LIGHT:"light",init(){var _=localStorage.getItem("theme");if(_==="dark"||_==="light")j.current=_;else{if(window.matchMedia!==void 0&&window.matchMedia("(prefers-color-scheme: dark)").matches)j.current=j.DARK;else j.current=j.LIGHT;localStorage.setItem("theme",j.current)}document.firstElementChild?.setAttribute("class",j.current)},change(_){localStorage.setItem("theme",_),document.firstElementChild?.setAttribute("class",j.current)},onclick(_){var x=_.currentTarget;if(x===null)return;if(j.current===j.DARK)j.current=j.LIGHT;else j.current=j.DARK;x.setAttribute("data-type",j.current),j.change(j.current)}},b={ATTR_SELECTED:"data-selected",ATTR_LINK_TYPE:"data-linkt",HIDDEN:"0",SHOW:"1",buttonNavOnclick(_){var x=_.currentTarget,K=x.nextElementSibling;if(K.getAttribute(b.ATTR_SHOW)===b.HIDDEN)K.setAttribute(b.ATTR_SHOW,b.SHOW),K.firstElementChild.firstElementChild.focus();else K.setAttribute(b.ATTR_SHOW,b.HIDDEN)},navOnfocusout(_){var x=_.relatedTarget;if(x===null||x.getAttribute("data-type")!==G.NAV_LINK){var K=_.currentTarget;K.setAttribute(b.ATTR_SHOW,b.HIDDEN)}},navOnclick(_){var x=_.target;if(x.getAttribute("data-type")===G.NAV_LINK){var K=x.getAttribute(b.ATTR_LINK_TYPE),$=_.currentTarget,z=$.previousElementSibling;z.replaceChildren(),z.insertAdjacentText("beforeend",x.textContent),$.setAttribute(b.ATTR_SHOW,b.HIDDEN),$.setAttribute(b.ATTR_SELECTED,K),_.preventDefault()}}},P={select(_){return _[i(_.length)]},selectHero(_){if(_){if(!_.results||_.results.length===0)throw Error("trending.results does not have data");return P.select(_.results)}},async getHeroLogo(_){if(_===void 0)return;var{id:x,media_type:K}=_,$=await F.getImages(x,K);if($.logos.length>0)return $.logos[0].file_path;else return},initDOMImgLogo(_,x){var K=x.lastElementChild.firstElementChild;if(_!==void 0)K.firstElementChild.setAttribute("data-opacity","0"),K.lastElementChild.setAttribute("data-display","1"),K.lastElementChild.setAttribute("src",`https://image.tmdb.org/t/p/w300${_}`)},initDOM(_,x){var K=x.firstElementChild.firstElementChild,$=x.lastElementChild,z=$.firstElementChild.firstElementChild,U=$.lastElementChild;if(K.setAttribute("data-display","1"),K.setAttribute("src",`https://image.tmdb.org/t/p/w1280${_.backdrop_path}`),_.media_type==="tv")z.insertAdjacentText("beforeend",_.name);else z.insertAdjacentText("beforeend",_.title);$.setAttribute("data-media",_.media_type),$.setAttribute("data-id",_.id),U.insertAdjacentText("beforeend",_.overview)}},y={TYPE_SBUTTON:"data-sbuttont",topScroll:0,DOMCollButtonOnclick(_){var x=_.parentElement.lastElementChild;const K=_.parentElement.children[1],$=_.parentElement.children[2];var z=_.getAttribute(y.TYPE_SBUTTON),U=x.clientWidth-x.clientWidth*6/100;if(x.scrollLeft-U<=0)K.setAttribute("data-display","0");else K.setAttribute("data-display","1");if(z==="0"){if(x.scrollBy(-U,0),x.scrollLeft-U<=0)K.setAttribute("data-display","0");$.setAttribute("data-display","1")}else{if(x.scrollBy(U,0),x.scrollLeft+U>=x.scrollWidth-x.clientWidth)$.setAttribute("data-display","0");K.setAttribute("data-display","1")}},async setItemImage(_,x,K){var $=await _,z=x.firstElementChild;if($===void 0||$.backdrops===void 0||$.backdrops.length===0){if(K!==null&&K.length>0)z.setAttribute("src",`https://image.tmdb.org/t/p/w400${K}`),z.setAttribute("data-display","1"),x.lastElementChild?.setAttribute("data-opacity","0")}else{var U=$.backdrops[0];z.setAttribute("src",`https://image.tmdb.org/t/p/w400${U.file_path}`),z.setAttribute("data-display","1"),x.lastElementChild?.setAttribute("data-opacity","0")}},createDOMCollection(_,x,K,$){var z=$.children[1].cloneNode(!0),U=$.children[2],q=z.children[0];q.insertAdjacentText("beforeend",_);for(var Q of x){const Z=U.cloneNode(!0);Z.setAttribute("data-id",Q.id);let J,R;if(K!==void 0)R=K;else R=Q.media_type;if(R==="movie")J=Q.title;else J=Q.name;Z.setAttribute("title",J),Z.setAttribute("data-media",R),Z.lastElementChild.insertAdjacentText("beforeend",J),Z.firstElementChild.setAttribute("alt",J),y.setItemImage(F.getImages(Q.id,R),Z,Q.backdrop_path),z.lastElementChild.appendChild(Z)}return z}},T=new AbortController,g={signal:T.signal},W={MAX_SIMILAR:4,fragment:document.createDocumentFragment(),id:"",mediaType:"tv",creditsLoaded:!1,dataLoaded:!1,similarLoaded:!1,seasonLoaded:!1,seasonNumber:-1,async getCredit(_,x,K,$){var z=await F.getCredits(_,x,g);if(console.info("credits:",z),z===void 0)return;W.DOMMCreditsFill(z,K,$),W.creditsLoaded=!0},async getData(_,x,K){var $=await F.get(_,x,!1,g);if(console.info("data:",$),$===void 0)return;if(_==="tv"){var z=K.modal.children[0];W.getCredit(_,x,z,K.templateModal.content),W.getSimilar(_,x,z,K.templateModal.content);var U=$.seasons;if(U.length>0)W.seasonNumber=U[0].season_number,W.getSeason(x,W.seasonNumber,z,K.templateModal.content);else W.seasonNumber=-1;W.DOMMTvFill($,K)}else{var q=K.modal.children[1];W.getCredit(_,x,q,K.templateModal.content),W.getSimilar(_,x,q,K.templateModal.content),W.DOMMMovieFill($,K)}W.dataLoaded=!0},async getSeason(_,x,K,$){var z=await F.getSeason(_,x,g);if(console.info("season:",z),z===void 0)return;var U=K.children[3].children[6],q=$.children[8],Q=U.firstElementChild.firstElementChild,Z=U.children[1],J=U.children[2],R=U.children[3];if(Q.textContent=`${z.episodes.length} episodes`,Z.textContent=z.name,J.textContent=z.overview,z.episodes.length>0){var V=z.episodes;for(var X of V){var f=q.cloneNode(!0),H=f.children[0],k=f.children[1].firstElementChild,N=f.children[1].lastElementChild,L=f.children[2],Y=f.children[3],u=f.children[4];if(X.still_path!==null)H.setAttribute("src",`https://image.tmdb.org/t/p/w400${X.still_path}`),H.setAttribute("alt",X.name);if(k.textContent=X.air_date,N.textContent=X.episode_number,L.textContent=X.name,X.runtime!==null)Y.textContent=`${X.runtime} min`;u.textContent=X.overview,W.fragment.appendChild(f)}R.replaceChildren(W.fragment)}else R.replaceChildren();W.seasonLoaded=!0},async getSimilar(_,x,K,$){var z=await F.get(_,x,!0,g);if(console.info("similars:",z),z===void 0)return;W.DOMMSimilarFill(z,_,K,$),W.similarLoaded=!0},orderCredits(_){if(_.length<2)return _.length;var x=0,K=0,$=0,z=1;for(var U=1;U<_.length;U+=1){var q=_[U];if(q.department!=="Crew"){while(x<=K){if(x<K)$=Math.floor((x+K)/2);else $=x;if(q.department<_[$].department)K=$-1;else if(q.department>_[$].department)x=$+1;else if(q.job<_[$].job)K=$-1;else x=$+1}if(x!==z)_.copyWithin(x+1,x,z);_[x]=q,x=0,K=z,z+=1}}return z},DOMMSimilarFill(_,x,K,$){var z=K.children[3].children.length,U=K.children[3].children[z-2],q=U.lastElementChild,Q=$.children[5],Z=_.results;if(Z!=null&&0<Z.length){U.setAttribute("data-display","1");var J=0;while(J<Z.length){var R=Z[J],V=Q.cloneNode(!0);V.setAttribute("data-id",R.id);let H;if(x==="movie")H=R.title;else H=R.name;V.setAttribute("title",H),V.setAttribute("data-media",x);var{firstElementChild:X,lastElementChild:f}=V;if(X.setAttribute("alt",H),f.insertAdjacentText("beforeend",H),R.poster_path!=null&&R.poster_path.length>0)X.setAttribute("src",`https://image.tmdb.org/t/p/w200${R.poster_path}`);else X.setAttribute("data-display","0"),f.setAttribute("data-opacity","1");W.fragment.appendChild(V),J+=1}q.appendChild(W.fragment)}},DOMMCreditsFill(_,x,K){var $=x.children[3].children[5],z=x.children[3].lastElementChild,U=K.children[0],q=K.children[1],Q=K.children[2],Z=K.children[3],J=K.children[4],R,V,X,f=_.cast;if(f.length>0){X=Q.cloneNode(!0),X.setAttribute("data-more","0"),X.firstElementChild.textContent="Cast:";for(var H=0;H<f.length;H+=1){var k=f[H];V=U.cloneNode(!1),V.setAttribute("data-id",k.id),V.setAttribute("data-type",G.MODAL_CAST),V.textContent=k.name,X.appendChild(V)}if(f.length>3){var N=J.cloneNode(!1);N.setAttribute("class","more"),N.setAttribute("data-type",G.MODAL_C_MORE),N.textContent="more",X.appendChild(N)}$.appendChild(X),X=void 0}if(_.crew.length>0){var L=_.crew,Y=W.orderCredits(L),u="",B="";for(var w=0;w<Y;w+=1){var h=L[w];if(h.department!==u){if(R!==void 0){if(X!==void 0)R?.appendChild(X),X=void 0;W.fragment.appendChild(R)}u=h.department,R=q.cloneNode(!0),R.firstElementChild.textContent=u}if(h.job!==B){if(X!==void 0)R?.appendChild(X);B=h.job,X=Q.cloneNode(!0),X.firstElementChild.textContent=`${B}:`}if(u==="Directing"&&(B==="Director"||B==="Series Director"||B==="Action Director"))V=U.cloneNode(!0),V.setAttribute("data-id",h.id),V.setAttribute("data-type",G.MODAL_CAST);else V=Z.cloneNode(!1);V.textContent=h.name,X.appendChild(V)}if(R!==void 0){if(X!==void 0)R?.appendChild(X);W.fragment.appendChild(R)}z?.appendChild(W.fragment)}},DOMMMovieFill(_,x){var K=x.modal,$=x.templateModal.content.children[2],X=x.templateModal.content.children[0],z=K.children[1],U=z.children[1].firstElementChild.firstElementChild,q=z.children[3],Q=q.children[0],Z=q.children[1],J=q.children[2],R=q.children[3],V=q.children[4],X=x.templateModal.content.children[0],f=x.templateModal.content.children[3],H=x.templateModal.content.children[4],k;if(Q.textContent=_.title,R.textContent=_?.overview,_.runtime!==void 0)J.textContent=`${_.runtime} min`;if(_?.backdrop_path!=null)U.setAttribute("src",`https://image.tmdb.org/t/p/w780${_.backdrop_path}`),U.setAttribute("alt",_.title),U.setAttribute("data-display","1");if(_.genres.length>0){for(var N of _.genres)k=X.cloneNode(!0),k.textContent=N.name,k.setAttribute("data-id",N.id),k.setAttribute("data-type",G.MODAL_GENRE),W.fragment.appendChild(k);Z.appendChild(W.fragment)}var L=$.cloneNode(!0);L.firstElementChild.textContent="Popularity:",k=f.cloneNode(!0),k.textContent=String(_.popularity),L.appendChild(k),V?.appendChild(L);var Y=$.cloneNode(!0);if(Y.firstElementChild.textContent="Release Date:",k=f.cloneNode(!0),k.textContent=_.release_date,Y.appendChild(k),V?.appendChild(Y),_.spoken_languages.length>0){var u=$.cloneNode(!0);u.firstElementChild.textContent="Languages:";for(var B of _.spoken_languages){if(k=f.cloneNode(!0),B.name.length>0)k.textContent=B.name;else k.textContent=B.english_name;u.appendChild(k)}V?.appendChild(u)}if(_.production_countries.length>0){var w=$.cloneNode(!0);w.firstElementChild.textContent="Countries:";for(var h of _.production_countries)k=f.cloneNode(!0),k.textContent=h.name,w.appendChild(k);V?.appendChild(w)}if(_.production_companies.length>0){var w=$.cloneNode(!0);w.setAttribute("data-more","0"),w.firstElementChild.textContent="Companies:";for(var c of _.production_companies)k=X.cloneNode(!0),X.setAttribute("data-type",G.MODAL_COMPANY),X.setAttribute("data-id",c.id),k.textContent=c.name,w.appendChild(k);if(_.production_companies.length>3){var E=H.cloneNode(!1);E.setAttribute("class","more"),E.setAttribute("data-type",G.MODAL_C_MORE),E.textContent="more",w.appendChild(E)}V?.appendChild(w)}},DOMMTvFill(_,x){var K=x.modal,$=x.templateModal.content.children[2],f=x.templateModal.content.children[0],z=K.children[0],U=z.children[1].firstElementChild.firstElementChild,q=z.children[3],Q=q.children[0],Z=q.children[1],J=q.children[2],R=q.children[3],V=q.children[4],X=q.children[6],f=x.templateModal.content.children[0],H=x.templateModal.content.children[3],k=x.templateModal.content.children[4],N=x.templateModal.content.children[6],L=x.templateModal.content.children[7],Y;if(Q.textContent=_.name,R.textContent=_?.overview,J.textContent=`${_.number_of_episodes} episodes, ${_.number_of_seasons} seasons`,_?.backdrop_path!=null)U.setAttribute("src",`https://image.tmdb.org/t/p/w780${_.backdrop_path}`),U.setAttribute("alt",_.name),U.setAttribute("data-display","1");if(_.genres.length>0){for(var u of _.genres)Y=f.cloneNode(!0),Y.textContent=u.name,Y.setAttribute("data-id",u.id),Y.setAttribute("data-type",G.MODAL_GENRE),W.fragment.appendChild(Y);Z.appendChild(W.fragment)}var B=$.cloneNode(!0);B.firstElementChild.textContent="Popularity:",Y=H.cloneNode(!0),Y.textContent=String(_.popularity),B.appendChild(Y),V?.appendChild(B);var w=$.cloneNode(!0);if(w.firstElementChild.textContent="First Air Date:",Y=H.cloneNode(!0),Y.textContent=_.first_air_date,w.appendChild(Y),V.appendChild(w),_.spoken_languages.length>0){var h=$.cloneNode(!0);h.firstElementChild.textContent="Languages:";for(var c of _.spoken_languages){if(Y=H.cloneNode(!0),c.name.length>0)Y.textContent=c.name;else Y.textContent=c.english_name;h.appendChild(Y)}V?.appendChild(h)}if(_.production_countries.length>0){var E=$.cloneNode(!0);E.firstElementChild.textContent="Countries:";for(var d of _.production_countries)Y=H.cloneNode(!0),Y.textContent=d.name,E.appendChild(Y);V?.appendChild(E)}if(_.production_companies.length>0){var E=$.cloneNode(!0);E.setAttribute("data-more","0"),E.firstElementChild.textContent="Companies:";for(var n of _.production_companies)Y=f.cloneNode(!0),f.setAttribute("data-type",G.MODAL_COMPANY),f.setAttribute("data-id",n.id),Y.textContent=n.name,E.appendChild(Y);if(_.production_companies.length>3){var I=k.cloneNode(!1);I.setAttribute("class","more"),I.setAttribute("data-type",G.MODAL_C_MORE),I.textContent="more",E.appendChild(I)}V?.appendChild(E)}if(W.seasonNumber!==-1){var v=_.seasons,C=N.content.cloneNode(!0),O=C.children[0].firstElementChild,l=C.children[0].lastElementChild,D=C.children[1],M=C.children[2];if(X.setAttribute("data-display","1"),O.textContent=`${v[0].episode_count} episodes`,D.textContent=v[0].name,M.textContent=v[0].overview,v.length>1)for(let s=0;s<v.length;s+=1){var m=v[s].season_number,p=L.cloneNode(!1);p.textContent=`Season ${m}`,p.setAttribute("value",String(m)),l.appendChild(p)}else l.setAttribute("data-display","0");X.appendChild(C)}},close(_){if(!W.dataLoaded||!W.creditsLoaded||!W.similarLoaded||!W.seasonLoaded)a("The modal is closed");var x;if(W.mediaType==="tv")x=_.modal.children[0];else x=_.modal.children[1];var K=x.children[1].firstElementChild?.firstElementChild,$=x.children[3];K?.setAttribute("data-display","0"),K?.setAttribute("src",""),K?.setAttribute("alt","");var z=$.children.length;if($.children[0].replaceChildren(),$.children[1].replaceChildren(),$.children[2].replaceChildren(),$.children[3].replaceChildren(),$.children[4].replaceChildren(),$.children[5].replaceChildren(),$.lastElementChild.replaceChildren(),W.mediaType==="tv"){var U=$.children[6];U.replaceChildren(),U.setAttribute("data-display","0")}var q=$.children[z-2];q.setAttribute("data-display","0"),q.lastElementChild.replaceChildren(),_.main.style.removeProperty("transform"),_.main.style.setProperty("position","relative"),_.modal.setAttribute("data-display","0"),document.firstElementChild.scrollTop=y.topScroll,W.seasonNumber=-1,W.id="",W.dataLoaded=!1,W.creditsLoaded=!1,W.similarLoaded=!1,W.seasonLoaded=!1},open(_,x,K){y.topScroll=document.firstElementChild.scrollTop,document.firstElementChild.scrollTop=0,W.mediaType=_,W.id=x,K.modal.setAttribute("data-display","1"),K.modal.setAttribute("data-select",_),K.main.style.setProperty("transform",`translateY(-${y.topScroll}px)`),K.main.style.setProperty("position","fixed"),W.getData(_,x,K)}};window.addEventListener("DOMContentLoaded",function(){var _={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerButtonNav:document.getElementById("header_button-nav"),headerNav:document.getElementById("header_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(_.templateCollection===null)throw Error("DOM.templateCollection is null");if(_.templateModal===null)throw Error("DOM.templateModal is null");if(_.headerButtonNav===null)throw Error("DOM.headerButtonNav is null");if(_.headerNav===null)throw Error("DOM.headerNav is null");if(_.headerButtonSearch===null)throw Error("DOM.headerButtonSearch is null");if(_.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(_.main===null)throw Error("DOM.main is null");if(_.hero===null)throw Error("DOM.hero is null");if(_.view===null)throw Error("DOM.view is null");if(_.buttonMore===null)throw Error("DOM.buttonMore is null");if(_.modal===null)throw Error("DOM.modal is null");j.init(),_.headerButtonTheme.setAttribute("data-type",j.current),_.headerButtonTheme.addEventListener("click",j.onclick),_.headerButtonNav.addEventListener("click",b.buttonNavOnclick),_.headerNav.addEventListener("focusout",b.navOnfocusout),_.headerNav.addEventListener("click",b.navOnclick),_.view.addEventListener("click",function(U){var q=U.target,Q=q.getAttribute("data-type");if(Q===G.COLL_BUTTON)y.DOMCollButtonOnclick(q);else if(Q===G.COLL_ITEM){var Z=q?.getAttribute("data-media"),J=q?.getAttribute("data-id");W.open(Z,J,_)}}),_.hero.lastElementChild.addEventListener("click",function(U){var q=U.target,Q=q?.getAttribute("data-id");if(Q!==void 0){var Z=q?.getAttribute("data-media");W.open(Z,Q,_)}}),_.modal.addEventListener("click",function(U){var q=U.target,Q=q.getAttribute("data-type");if(Q===G.MODAL||Q===G.MODAL_CLOSE)W.close(_);else if(Q===G.MODAL_C_MORE)q.parentElement.setAttribute("data-more","1");else if(Q===G.COLL_ITEM){var Z=q?.getAttribute("data-id"),J=q?.getAttribute("data-media");W.close(_),W.open(J,Z,_)}}),_.modal.addEventListener("change",function(U){var q=U.target,Q=q.getAttribute("data-type");if(Q===G.MODAL_SEASON_N){var Z=Number(q.value);if(Z===NaN)return;if(Z!==W.seasonNumber)W.seasonNumber=Z,W.getSeason(W.id,Z,_.modal.children[0],_.templateModal.content)}});var x=F.getTrending("1");x.then(function(U){console.info("trending: ",U)});var K=x.then(P.selectHero);K.then(function(U){console.info("hero: ",U)}),K.then(P.getHeroLogo).then(function(U){P.initDOMImgLogo(U,_.hero)}),K.then(function(U){if(U!==void 0)P.initDOM(U,_.hero)}),x.then(function(U){if(U?.results===void 0||U.results.length===0)throw Error("API.getTrending does not have data");var q=y.createDOMCollection("Week Trendings",U.results,void 0,_.templateCollection.content),Q=_.view.children[0];Q.insertAdjacentElement("beforebegin",q),Q.remove()}),F.getPopular("movie","1").then(function(U){if(console.info("getPopular movie",U),U?.results===void 0||U.results.length===0)throw Error("API.getDiscover does not have data");var q=y.createDOMCollection("Popular Movies",U.results,"movie",_.templateCollection.content),Q=_.view.children[1];Q.insertAdjacentElement("beforebegin",q),Q.remove()}),F.getPopular("tv","1").then(function(U){if(console.info("getPopular tv",U),U?.results===void 0||U.results.length===0)throw Error("API.getDiscover does not have data");var q=y.createDOMCollection("Popular Tv series",U.results,"tv",_.templateCollection.content),Q=_.view.children[2];Q.insertAdjacentElement("beforebegin",q),Q.remove()}),F.getTopRated("movie","1").then(function(U){if(console.info("getTopRate movie",U),U?.results===void 0||U.results.length===0)throw Error("API.getTopRated does not have data");var q=y.createDOMCollection("Top rated movie",U.results,"movie",_.templateCollection.content),Q=_.view.children[3];Q.insertAdjacentElement("beforebegin",q),Q.remove()}),F.getTopRated("tv","1").then(function(U){if(console.info("getTopRate tv",U),U?.results===void 0||U.results.length===0)throw Error("API.getTopRated does not have data");var q=y.createDOMCollection("Top rated tv serie",U.results,"tv",_.templateCollection.content),Q=_.view.children[4];Q.insertAdjacentElement("beforebegin",q),Q.remove()});var $=F.getGenres("movie"),z=F.getGenres("tv");Promise.all([$,z]).then(function(U){if(console.info("movie genres",U[0]),console.info("tv genres",U[1]),U[0]===void 0||U[0].genres===void 0||U[0].genres.length===0)throw Error("API.getGenre does not have data");if(U[1]===void 0||U[1].genres===void 0||U[1].genres.length===0)throw Error("API.getGenre does not have data");var q=U[0].genres,Q=U[1].genres;if(A.tvGenres=Q,A.movieGenres=q,q.length+Q.length<A.MAX)A.len=q.length+Q.length;else A.len=A.MAX;if(console.info("Collection:",A),_.buttonMore?.setAttribute("data-display","1"),q.length>1)r(q);if(Q.length>1)r(Q);var Z,J,R,V,X=0,f=0;for(let H=0;H<2;H+=1){if(Math.random()<0.5)J=q[X].id,R=q[X].name,Z="movie",V=`${R} Movies`,X+=1,A.imov+=1;else J=Q[f].id,R=Q[f].name,Z="tv",V=`${R} Tv series`,f+=1,A.itv+=1;o(F.getDiscover(Z,J,"1"),V,Z,H,5,_)}}),_.buttonMore.addEventListener("click",function(U){var q,Q,Z,J,R=A.movieGenres,V=A.tvGenres,X=A.itv,f=A.imov,H=0;_.buttonMore?.setAttribute("data-display","0");var k=0,N=!1;if(A.count+A.STEPS<A.len)k=A.count+A.STEPS;else k=A.len,N=!0;for(var L=A.count;L<k;L+=1){var Y=_.templateCollection.content.children[0].cloneNode(!0);_.view?.appendChild(Y)}for(var L=A.count;L<k;L+=1){if(X<V.length&&f<R.length){if(Math.random()<0.5)H=1}else if(tv<V.length)H=1;if(H===0)Q=R[f].id,Z=R[f].name,q="movie",J=`${Z} Movies`,f+=1,A.imov+=1;else Q=V[X].id,Z=V[X].name,q="tv",J=`${Z} Tv series`,X+=1,A.itv+=1;A.count+=1,o(F.getDiscover(q,Q,"1"),J,q,L,_.view.children.length-k,_)}if(!N)_.buttonMore?.setAttribute("data-display","1")})});
