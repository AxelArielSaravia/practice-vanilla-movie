var y=function($){if($.ok)return $.json()};var O={getTrending($="1"){return fetch(`${window.location.origin}/api/trending?page=${$}`).then(y)},getPopular($,K="1"){return fetch(`${window.location.origin}/api/popular?type=${$}&page=${K}`).then(y)},getDiscover($,K,W="1"){var q=`${window.location.origin}/api/discover?type=${$}&page=${W}`;if(K!==void 0)q=`${q}&genre=${K}`;return fetch(q).then(y)},getImages($,K){return fetch(`${window.location.origin}/api/images?type=${K}&id=${$}`).then(y)},getGenres($){return fetch(`${window.location.origin}/api/genres?type=${$}`).then(y)},getTopRated($,K="1"){return fetch(`${window.location.origin}/api/toprated?type=${$}&page=${K}`).then(y)},get($,K,W,q){var Q=`${window.location.origin}/api/${$}?id=${K}`;if(W)Q+="&similar";return fetch(Q,q).then(y)},getCredits($,K,W){return fetch(`${window.location.origin}/api/credits?type=${$}&id=${K}`,W).then(y)},getSeason($,K,W){return fetch(`${window.location.origin}/api/season?id=${$}&n=${K}`,W).then(y)}},b=O;var i=function($){return Math.floor(Math.random()*$)},r=function($){var K=$.length;for(var W=0;W<K-1;W+=1){var q=W+Math.floor(Math.random()*(K-W)),Q=$[W];$[W]=$[q],$[q]=Q}};var M=function($){T.abort($),T=new AbortController,v.signal=T.signal};async function o($,K,W,q,Q,U){var z=await $;if(console.info(K,z),z?.results===void 0||z.results.length===0)throw Error("API.getTopRated does not have data");var X=C.createDOMCollection(K,z.results,W,U.templateCollection.content),_=U.view.children[Q+q];_.insertAdjacentElement("beforebegin",X),_.remove()}var j={NAV_LINK:"0",COLL_TITLE:"4",COLL_BUTTON:"5",COLL_ITEM:"6",MODAL:"8",MODAL_CLOSE:"9",MODAL_GENRE:"10",MODAL_COMPANY:"11",MODAL_CAST:"12",MODAL_C_MORE:"13",MODAL_SEASON_N:"14"},H={MAX:15,STEPS:5,len:0,count:7,itv:0,tvGenres:null,imov:0,movieGenres:null},G={current:"dark",DARK:"dark",LIGHT:"light",init(){var $=localStorage.getItem("theme");if($==="dark"||$==="light")G.current=$;else{if(window.matchMedia!==void 0&&window.matchMedia("(prefers-color-scheme: dark)").matches)G.current=G.DARK;else G.current=G.LIGHT;localStorage.setItem("theme",G.current)}document.firstElementChild?.setAttribute("class",G.current)},change($){localStorage.setItem("theme",$),document.firstElementChild?.setAttribute("class",G.current)},onclick($){var K=$.currentTarget;if(K===null)return;if(G.current===G.DARK)G.current=G.LIGHT;else G.current=G.DARK;K.setAttribute("data-type",G.current),G.change(G.current)}},N={ATTR_SELECTED:"data-selected",ATTR_LINK_TYPE:"data-linkt",HIDDEN:"0",SHOW:"1",buttonNavOnclick($){var K=$.currentTarget,W=K.nextElementSibling;if(W.getAttribute(N.ATTR_SHOW)===N.HIDDEN)W.setAttribute(N.ATTR_SHOW,N.SHOW),W.firstElementChild.firstElementChild.focus();else W.setAttribute(N.ATTR_SHOW,N.HIDDEN)},navOnfocusout($){var K=$.relatedTarget;if(K===null||K.getAttribute("data-type")!==j.NAV_LINK){var W=$.currentTarget;W.setAttribute(N.ATTR_SHOW,N.HIDDEN)}},navOnclick($){var K=$.target;if(K.getAttribute("data-type")===j.NAV_LINK){var W=K.getAttribute(N.ATTR_LINK_TYPE),q=$.currentTarget,Q=q.previousElementSibling;Q.replaceChildren(),Q.insertAdjacentText("beforeend",K.textContent),q.setAttribute(N.ATTR_SHOW,N.HIDDEN),q.setAttribute(N.ATTR_SELECTED,W),$.preventDefault()}}},c={select($){return $[i($.length)]},selectHero($){if($){if(!$.results||$.results.length===0)throw Error("trending.results does not have data");return c.select($.results)}},async getHeroLogo($){if($===void 0)return;var{id:K,media_type:W}=$,q=await b.getImages(K,W);if(q.logos.length>0)return q.logos[0].file_path;else return},initDOMImgLogo($,K){var W=K.lastElementChild.firstElementChild;if($!==void 0)W.firstElementChild.setAttribute("data-opacity","0"),W.lastElementChild.setAttribute("data-display","1"),W.lastElementChild.setAttribute("src",`https://image.tmdb.org/t/p/w300${$}`)},initDOM($,K){var W=K.firstElementChild.firstElementChild,q=K.lastElementChild,Q=q.firstElementChild.firstElementChild,U=q.lastElementChild;if(W.setAttribute("data-display","1"),W.setAttribute("src",`https://image.tmdb.org/t/p/w1280${$.backdrop_path}`),$.media_type==="tv")Q.insertAdjacentText("beforeend",$.name);else Q.insertAdjacentText("beforeend",$.title);q.setAttribute("data-media",$.media_type),q.setAttribute("data-id",$.id),U.insertAdjacentText("beforeend",$.overview)}},C={TYPE_SBUTTON:"data-sbuttont",topScroll:0,DOMCollButtonOnclick($){var K=$.parentElement.lastElementChild;const W=$.parentElement.children[1],q=$.parentElement.children[2];var Q=$.getAttribute(C.TYPE_SBUTTON),U=K.clientWidth-K.clientWidth*6/100;if(K.scrollLeft-U<=0)W.setAttribute("data-display","0");else W.setAttribute("data-display","1");if(Q==="0"){if(K.scrollBy(-U,0),K.scrollLeft-U<=0)W.setAttribute("data-display","0");q.setAttribute("data-display","1")}else{if(K.scrollBy(U,0),K.scrollLeft+U>=K.scrollWidth-K.clientWidth)q.setAttribute("data-display","0");W.setAttribute("data-display","1")}},async setItemImage($,K,W){var q=await $,Q=K.firstElementChild;if(q===void 0||q.backdrops===void 0||q.backdrops.length===0){if(W!==null&&W.length>0)Q.setAttribute("src",`https://image.tmdb.org/t/p/w400${W}`),Q.setAttribute("data-display","1"),K.lastElementChild?.setAttribute("data-opacity","0")}else{var U=q.backdrops[0];Q.setAttribute("src",`https://image.tmdb.org/t/p/w400${U.file_path}`),Q.setAttribute("data-display","1"),K.lastElementChild?.setAttribute("data-opacity","0")}},createDOMCollection($,K,W,q){var Q=q.children[1].cloneNode(!0),U=q.children[2],z=Q.children[0];z.insertAdjacentText("beforeend",$);for(var X of K){const _=U.cloneNode(!0);_.setAttribute("data-id",X.id);let L,R;if(W!==void 0)R=W;else R=X.media_type;if(R==="movie")L=X.title;else L=X.name;_.setAttribute("title",L),_.setAttribute("data-media",R),_.lastElementChild.insertAdjacentText("beforeend",L),_.firstElementChild.setAttribute("alt",L),C.setItemImage(b.getImages(X.id,R),_,X.backdrop_path),Q.lastElementChild.appendChild(_)}return Q}},T=new AbortController,v={signal:T.signal},Z={MAX_SIMILAR:4,fragment:document.createDocumentFragment(),id:"",mediaType:"tv",creditsLoaded:!1,dataLoaded:!1,similarLoaded:!1,seasonLoaded:!1,seasonNumber:-1,async getCredit($,K,W,q){var Q=await b.getCredits($,K,v);if(console.info("credits:",Q),Q===void 0)return;Z.DOMMCreditsFill(Q,W,q),Z.creditsLoaded=!0},async getData($,K,W){var q=await b.get($,K,!1,v);if(console.info("data:",q),q===void 0)return;if($==="tv"){var Q=W.modal.children[0];Z.getCredit($,K,Q,W.templateModal.content),Z.getSimilar($,K,Q,W.templateModal.content);var U=q.seasons;if(U.length>0){var z=!1;for(var X of U)if(X.season_number===1){z=!0;break}if(z)Z.seasonNumber=1;else Z.seasonNumber=U[0].season_number;Z.getSeason(K,Z.seasonNumber,Q,W.templateModal.content)}else Z.seasonNumber=-1;Z.DOMMTvFill(q,W)}else{var _=W.modal.children[1];Z.getCredit($,K,_,W.templateModal.content),Z.getSimilar($,K,_,W.templateModal.content),Z.DOMMMovieFill(q,W)}Z.dataLoaded=!0},async getSeason($,K,W,q){var Q=await b.getSeason($,K,v);if(console.info("season:",Q),Q===void 0)return;var U=W.children[3].children[6],z=q.children[8],X=q.children[4],_=U.firstElementChild.firstElementChild,L=U.children[1],R=U.children[2],x=U.children[3];if(x.setAttribute("data-more","0"),_.textContent=`${Q.episodes.length} episodes`,L.textContent=Q.name,R.textContent=Q.overview,Q.episodes.length>0){var V=Q.episodes;for(var k of V){var J=z.cloneNode(!0),f=J.children[0].firstElementChild,B=J.children[1],w=J.children[2].children[0],Y=J.children[2].children[1],u=J.children[2].children[2],F=J.children[2].children[3];if(k.still_path!==null)f.setAttribute("src",`https://image.tmdb.org/t/p/w400${k.still_path}`),f.setAttribute("alt",k.name);if(w.textContent=k.air_date,B.textContent=k.episode_number,Y.textContent=k.name,k.runtime!==null)u.textContent=`${k.runtime} min`;F.textContent=k.overview,Z.fragment.appendChild(J)}if(Q.episodes.length>4){var A=X.cloneNode(!0);A.textContent="more +",A.setAttribute("data-type",j.MODAL_C_MORE),Z.fragment.appendChild(A)}x.replaceChildren(Z.fragment)}else x.replaceChildren();Z.seasonLoaded=!0},async getSimilar($,K,W,q){var Q=await b.get($,K,!0,v);if(console.info("similars:",Q),Q===void 0)return;Z.DOMMSimilarFill(Q,$,W,q),Z.similarLoaded=!0},orderCredits($){if($.length<2)return $.length;var K=0,W=0,q=0,Q=1;for(var U=1;U<$.length;U+=1){var z=$[U];if(z.department!=="Crew"){while(K<=W){if(K<W)q=Math.floor((K+W)/2);else q=K;if(z.department<$[q].department)W=q-1;else if(z.department>$[q].department)K=q+1;else if(z.job<$[q].job)W=q-1;else K=q+1}if(K!==Q)$.copyWithin(K+1,K,Q);$[K]=z,K=0,W=Q,Q+=1}}return Q},DOMMSimilarFill($,K,W,q){var Q=W.children[3].children.length,U=W.children[3].children[Q-2],z=U.lastElementChild,X=q.children[5],_=$.results;if(_!=null&&0<_.length){U.setAttribute("data-display","1");var L=0;while(L<_.length){var R=_[L],x=X.cloneNode(!0);x.setAttribute("data-id",R.id);let J;if(K==="movie")J=R.title;else J=R.name;x.setAttribute("title",J),x.setAttribute("data-media",K);var{firstElementChild:V,lastElementChild:k}=x;if(V.setAttribute("alt",J),k.insertAdjacentText("beforeend",J),R.poster_path!=null&&R.poster_path.length>0)V.setAttribute("src",`https://image.tmdb.org/t/p/w200${R.poster_path}`);else V.setAttribute("data-display","0"),k.setAttribute("data-opacity","1");Z.fragment.appendChild(x),L+=1}z.appendChild(Z.fragment)}},DOMMCreditsFill($,K,W){var q=K.children[3].children[5],Q=K.children[3].lastElementChild,U=W.children[0],z=W.children[1],X=W.children[2],_=W.children[3],L=W.children[4],R,x,V,k=$.cast;if(k.length>0){V=X.cloneNode(!0),V.setAttribute("data-more","0"),V.firstElementChild.textContent="Cast:";for(var J=0;J<k.length;J+=1){var f=k[J];x=U.cloneNode(!1),x.setAttribute("data-id",f.id),x.setAttribute("data-type",j.MODAL_CAST),x.textContent=f.name,V.appendChild(x)}if(k.length>3){var B=L.cloneNode(!1);B.setAttribute("class","more"),B.setAttribute("data-type",j.MODAL_C_MORE),B.textContent="more",V.appendChild(B)}q.appendChild(V),V=void 0}if($.crew.length>0){var w=$.crew,Y=Z.orderCredits(w),u="",F="";for(var A=0;A<Y;A+=1){var h=w[A];if(h.department!==u){if(R!==void 0){if(V!==void 0)R?.appendChild(V),V=void 0;Z.fragment.appendChild(R)}u=h.department,R=z.cloneNode(!0),R.firstElementChild.textContent=u}if(h.job!==F){if(V!==void 0)R?.appendChild(V);F=h.job,V=X.cloneNode(!0),V.firstElementChild.textContent=`${F}:`}if(u==="Directing"&&(F==="Director"||F==="Series Director"||F==="Action Director"))x=U.cloneNode(!0),x.setAttribute("data-id",h.id),x.setAttribute("data-type",j.MODAL_CAST);else x=_.cloneNode(!1);x.textContent=h.name,V.appendChild(x)}if(R!==void 0){if(V!==void 0)R?.appendChild(V);Z.fragment.appendChild(R)}Q?.appendChild(Z.fragment)}},DOMMMovieFill($,K){var W=K.modal,q=K.templateModal.content.children[2],V=K.templateModal.content.children[0],Q=W.children[1],U=Q.children[1].firstElementChild.firstElementChild,z=Q.children[3],X=z.children[0],_=z.children[1],L=z.children[2],R=z.children[3],x=z.children[4],V=K.templateModal.content.children[0],k=K.templateModal.content.children[3],J=K.templateModal.content.children[4],f;if(X.textContent=$.title,R.textContent=$?.overview,$.runtime!==void 0)L.textContent=`${$.runtime} min`;if($?.backdrop_path!=null)U.setAttribute("src",`https://image.tmdb.org/t/p/w780${$.backdrop_path}`),U.setAttribute("alt",$.title),U.setAttribute("data-display","1");if($.genres.length>0){for(var B of $.genres)f=V.cloneNode(!0),f.textContent=B.name,f.setAttribute("data-id",B.id),f.setAttribute("data-type",j.MODAL_GENRE),Z.fragment.appendChild(f);_.appendChild(Z.fragment)}var w=q.cloneNode(!0);w.firstElementChild.textContent="Popularity:",f=k.cloneNode(!0),f.textContent=String($.popularity),w.appendChild(f),x?.appendChild(w);var Y=q.cloneNode(!0);if(Y.firstElementChild.textContent="Release Date:",f=k.cloneNode(!0),f.textContent=$.release_date,Y.appendChild(f),x?.appendChild(Y),$.spoken_languages.length>0){var u=q.cloneNode(!0);u.firstElementChild.textContent="Languages:";for(var F of $.spoken_languages){if(f=k.cloneNode(!0),F.name.length>0)f.textContent=F.name;else f.textContent=F.english_name;u.appendChild(f)}x?.appendChild(u)}if($.production_countries.length>0){var A=q.cloneNode(!0);A.firstElementChild.textContent="Countries:";for(var h of $.production_countries)f=k.cloneNode(!0),f.textContent=h.name,A.appendChild(f);x?.appendChild(A)}if($.production_companies.length>0){var A=q.cloneNode(!0);A.setAttribute("data-more","0"),A.firstElementChild.textContent="Companies:";for(var S of $.production_companies)f=V.cloneNode(!0),V.setAttribute("data-type",j.MODAL_COMPANY),V.setAttribute("data-id",S.id),f.textContent=S.name,A.appendChild(f);if($.production_companies.length>3){var E=J.cloneNode(!1);E.setAttribute("class","more"),E.setAttribute("data-type",j.MODAL_C_MORE),E.textContent="more",A.appendChild(E)}x?.appendChild(A)}},DOMMTvFill($,K){var W=K.modal,q=K.templateModal.content.children[2],k=K.templateModal.content.children[0],Q=W.children[0],U=Q.children[1].firstElementChild.firstElementChild,z=Q.children[3],X=z.children[0],_=z.children[1],L=z.children[2],R=z.children[3],x=z.children[4],V=z.children[6],k=K.templateModal.content.children[0],J=K.templateModal.content.children[3],f=K.templateModal.content.children[4],B=K.templateModal.content.children[6],w=K.templateModal.content.children[7],Y;if(X.textContent=$.name,R.textContent=$?.overview,L.textContent=`${$.number_of_episodes} episodes, ${$.number_of_seasons} seasons`,$?.backdrop_path!=null)U.setAttribute("src",`https://image.tmdb.org/t/p/w780${$.backdrop_path}`),U.setAttribute("alt",$.name),U.setAttribute("data-display","1");if($.genres.length>0){for(var u of $.genres)Y=k.cloneNode(!0),Y.textContent=u.name,Y.setAttribute("data-id",u.id),Y.setAttribute("data-type",j.MODAL_GENRE),Z.fragment.appendChild(Y);_.appendChild(Z.fragment)}var F=q.cloneNode(!0);F.firstElementChild.textContent="Popularity:",Y=J.cloneNode(!0),Y.textContent=String($.popularity),F.appendChild(Y),x?.appendChild(F);var A=q.cloneNode(!0);if(A.firstElementChild.textContent="First Air Date:",Y=J.cloneNode(!0),Y.textContent=$.first_air_date,A.appendChild(Y),x.appendChild(A),$.spoken_languages.length>0){var h=q.cloneNode(!0);h.firstElementChild.textContent="Languages:";for(var S of $.spoken_languages){if(Y=J.cloneNode(!0),S.name.length>0)Y.textContent=S.name;else Y.textContent=S.english_name;h.appendChild(Y)}x?.appendChild(h)}if($.production_countries.length>0){var E=q.cloneNode(!0);E.firstElementChild.textContent="Countries:";for(var d of $.production_countries)Y=J.cloneNode(!0),Y.textContent=d.name,E.appendChild(Y);x?.appendChild(E)}if($.production_companies.length>0){var E=q.cloneNode(!0);E.setAttribute("data-more","0"),E.firstElementChild.textContent="Companies:";for(var l of $.production_companies)Y=k.cloneNode(!0),k.setAttribute("data-type",j.MODAL_COMPANY),k.setAttribute("data-id",l.id),Y.textContent=l.name,E.appendChild(Y);if($.production_companies.length>3){var P=f.cloneNode(!1);P.setAttribute("class","more"),P.setAttribute("data-type",j.MODAL_C_MORE),P.textContent="more",E.appendChild(P)}x?.appendChild(E)}if(Z.seasonNumber!==-1){var I=$.seasons,n=B.content.cloneNode(!0),m=n.children[0].lastElementChild;if(V.setAttribute("data-display","1"),I.length>1)for(let s=0;s<I.length;s+=1){var p=I[s].season_number,g=w.cloneNode(!1);if(p===1)g.setAttribute("selected","true");g.textContent=`Season ${p}`,g.setAttribute("value",String(p)),m.appendChild(g)}else m.setAttribute("data-display","0");V.appendChild(n)}},close($){if(!Z.dataLoaded||!Z.creditsLoaded||!Z.similarLoaded||!Z.seasonLoaded)M("The modal is closed");var K;if(Z.mediaType==="tv")K=$.modal.children[0];else K=$.modal.children[1];var W=K.children[1].firstElementChild?.firstElementChild,q=K.children[3];W?.setAttribute("data-display","0"),W?.setAttribute("src",""),W?.setAttribute("alt","");var Q=q.children.length;if(q.children[0].replaceChildren(),q.children[1].replaceChildren(),q.children[2].replaceChildren(),q.children[3].replaceChildren(),q.children[4].replaceChildren(),q.children[5].replaceChildren(),q.lastElementChild.replaceChildren(),Z.mediaType==="tv"){var U=q.children[6];U.replaceChildren(),U.setAttribute("data-display","0")}var z=q.children[Q-2];z.setAttribute("data-display","0"),z.lastElementChild.replaceChildren(),$.main.style.removeProperty("transform"),$.main.style.setProperty("position","relative"),$.modal.setAttribute("data-display","0"),document.firstElementChild.scrollTop=C.topScroll,Z.seasonNumber=-1,Z.id="",Z.dataLoaded=!1,Z.creditsLoaded=!1,Z.similarLoaded=!1,Z.seasonLoaded=!1},open($,K,W){C.topScroll=document.firstElementChild.scrollTop,document.firstElementChild.scrollTop=0,Z.mediaType=$,Z.id=K,W.modal.setAttribute("data-display","1"),W.modal.setAttribute("data-select",$),W.main.style.setProperty("transform",`translateY(-${C.topScroll}px)`),W.main.style.setProperty("position","fixed"),Z.getData($,K,W)}};window.addEventListener("DOMContentLoaded",function(){var $={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerButtonNav:document.getElementById("header_button-nav"),headerNav:document.getElementById("header_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if($.templateCollection===null)throw Error("DOM.templateCollection is null");if($.templateModal===null)throw Error("DOM.templateModal is null");if($.headerButtonNav===null)throw Error("DOM.headerButtonNav is null");if($.headerNav===null)throw Error("DOM.headerNav is null");if($.headerButtonSearch===null)throw Error("DOM.headerButtonSearch is null");if($.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if($.main===null)throw Error("DOM.main is null");if($.hero===null)throw Error("DOM.hero is null");if($.view===null)throw Error("DOM.view is null");if($.buttonMore===null)throw Error("DOM.buttonMore is null");if($.modal===null)throw Error("DOM.modal is null");G.init(),$.headerButtonTheme.setAttribute("data-type",G.current),$.headerButtonTheme.addEventListener("click",G.onclick),$.headerButtonNav.addEventListener("click",N.buttonNavOnclick),$.headerNav.addEventListener("focusout",N.navOnfocusout),$.headerNav.addEventListener("click",N.navOnclick),$.view.addEventListener("click",function(U){var z=U.target,X=z.getAttribute("data-type");if(X===j.COLL_BUTTON)C.DOMCollButtonOnclick(z);else if(X===j.COLL_ITEM){var _=z?.getAttribute("data-media"),L=z?.getAttribute("data-id");Z.open(_,L,$)}}),$.hero.lastElementChild.addEventListener("click",function(U){var z=U.target,X=z?.getAttribute("data-id");if(X!==void 0){var _=z?.getAttribute("data-media");Z.open(_,X,$)}}),$.modal.addEventListener("click",function(U){var z=U.target,X=z.getAttribute("data-type");if(X===j.MODAL||X===j.MODAL_CLOSE)Z.close($);else if(X===j.MODAL_C_MORE)z.parentElement.setAttribute("data-more","1");else if(X===j.COLL_ITEM){var _=z?.getAttribute("data-id"),L=z?.getAttribute("data-media");Z.close($),Z.open(L,_,$)}}),$.modal.addEventListener("change",function(U){var z=U.target,X=z.getAttribute("data-type");if(X===j.MODAL_SEASON_N){var _=Number(z.value);if(_===NaN)return;if(_!==Z.seasonNumber)Z.seasonNumber=_,Z.getSeason(Z.id,_,$.modal.children[0],$.templateModal.content)}});var K=b.getTrending("1");K.then(function(U){console.info("trending: ",U)});var W=K.then(c.selectHero);W.then(function(U){console.info("hero: ",U)}),W.then(c.getHeroLogo).then(function(U){c.initDOMImgLogo(U,$.hero)}),W.then(function(U){if(U!==void 0)c.initDOM(U,$.hero)}),K.then(function(U){if(U?.results===void 0||U.results.length===0)throw Error("API.getTrending does not have data");var z=C.createDOMCollection("Week Trendings",U.results,void 0,$.templateCollection.content),X=$.view.children[0];X.insertAdjacentElement("beforebegin",z),X.remove()}),b.getPopular("movie","1").then(function(U){if(console.info("getPopular movie",U),U?.results===void 0||U.results.length===0)throw Error("API.getDiscover does not have data");var z=C.createDOMCollection("Popular Movies",U.results,"movie",$.templateCollection.content),X=$.view.children[1];X.insertAdjacentElement("beforebegin",z),X.remove()}),b.getPopular("tv","1").then(function(U){if(console.info("getPopular tv",U),U?.results===void 0||U.results.length===0)throw Error("API.getDiscover does not have data");var z=C.createDOMCollection("Popular Tv series",U.results,"tv",$.templateCollection.content),X=$.view.children[2];X.insertAdjacentElement("beforebegin",z),X.remove()}),b.getTopRated("movie","1").then(function(U){if(console.info("getTopRate movie",U),U?.results===void 0||U.results.length===0)throw Error("API.getTopRated does not have data");var z=C.createDOMCollection("Top rated movie",U.results,"movie",$.templateCollection.content),X=$.view.children[3];X.insertAdjacentElement("beforebegin",z),X.remove()}),b.getTopRated("tv","1").then(function(U){if(console.info("getTopRate tv",U),U?.results===void 0||U.results.length===0)throw Error("API.getTopRated does not have data");var z=C.createDOMCollection("Top rated tv serie",U.results,"tv",$.templateCollection.content),X=$.view.children[4];X.insertAdjacentElement("beforebegin",z),X.remove()});var q=b.getGenres("movie"),Q=b.getGenres("tv");Promise.all([q,Q]).then(function(U){if(console.info("movie genres",U[0]),console.info("tv genres",U[1]),U[0]===void 0||U[0].genres===void 0||U[0].genres.length===0)throw Error("API.getGenre does not have data");if(U[1]===void 0||U[1].genres===void 0||U[1].genres.length===0)throw Error("API.getGenre does not have data");var z=U[0].genres,X=U[1].genres;if(H.tvGenres=X,H.movieGenres=z,z.length+X.length<H.MAX)H.len=z.length+X.length;else H.len=H.MAX;if(console.info("Collection:",H),$.buttonMore?.setAttribute("data-display","1"),z.length>1)r(z);if(X.length>1)r(X);var _,L,R,x,V=0,k=0;for(let J=0;J<2;J+=1){if(Math.random()<0.5)L=z[V].id,R=z[V].name,_="movie",x=`${R} Movies`,V+=1,H.imov+=1;else L=X[k].id,R=X[k].name,_="tv",x=`${R} Tv series`,k+=1,H.itv+=1;o(b.getDiscover(_,L,"1"),x,_,J,5,$)}}),$.buttonMore.addEventListener("click",function(U){var z,X,_,L,R=H.movieGenres,x=H.tvGenres,V=H.itv,k=H.imov,J=0;$.buttonMore?.setAttribute("data-display","0");var f=0,B=!1;if(H.count+H.STEPS<H.len)f=H.count+H.STEPS;else f=H.len,B=!0;for(var w=H.count;w<f;w+=1){var Y=$.templateCollection.content.children[0].cloneNode(!0);$.view?.appendChild(Y)}for(var w=H.count;w<f;w+=1){if(V<x.length&&k<R.length){if(Math.random()<0.5)J=1}else if(tv<x.length)J=1;if(J===0)X=R[k].id,_=R[k].name,z="movie",L=`${_} Movies`,k+=1,H.imov+=1;else X=x[V].id,_=x[V].name,z="tv",L=`${_} Tv series`,V+=1,H.itv+=1;H.count+=1,o(b.getDiscover(z,X,"1"),L,z,w,$.view.children.length-f,$)}if(!B)$.buttonMore?.setAttribute("data-display","1")})});
