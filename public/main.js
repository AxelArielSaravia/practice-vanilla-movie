import E from"./general.js";var V=function(h){var A,B,I,K,u=b.movieGenres,q=b.tvGenres,R=b.itv,z=b.imov,H=0;h.buttonMore?.setAttribute("data-display","0");var w=0,J=!1;if(b.count+b.STEPS<b.len)w=b.count+b.STEPS;else w=b.len,J=!0;for(var x=b.count;x<w;x+=1){var Q=h.templateCollection.content.children[0].cloneNode(!0);h.view?.appendChild(Q)}for(var x=b.count;x<w;x+=1){if(R<q.length&&z<u.length){if(Math.random()<0.5)H=1}else if(tv<q.length)H=1;if(H===0)B=u[z].id,I=u[z].name,A="movie",K=`${I} Movies`,z+=1,b.imov+=1;else B=q[R].id,I=q[R].name,A="tv",K=`${I} Tv Series`,R+=1,b.itv+=1;b.count+=1,E.View.discover(E.API.getDiscover(A,"1",B,void 0,void 0,void 0),K,A,B,x,h.view.children.length-w,h)}if(!J)h.buttonMore?.setAttribute("data-display","1")},b={MAX:15,STEPS:5,len:0,count:7,itv:0,tvGenres:null,imov:0,movieGenres:null};window.addEventListener("DOMContentLoaded",function(){var h={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(h.templateCollection===null)throw Error("DOM.templateCollection is null");if(h.templateModal===null)throw Error("DOM.templateModal is null");if(h.headerPNav===null)throw Error("DOM.headerPNav is null");if(h.headerButtonSearch===null)throw Error("DOM.headerButtonSearch is null");if(h.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(h.main===null)throw Error("DOM.main is null");if(h.hero===null)throw Error("DOM.hero is null");if(h.heroTitle===null)throw Error("DOM.heroTitle is null");if(h.view===null)throw Error("DOM.view is null");if(h.buttonMore===null)throw Error("DOM.buttonMore is null");if(h.modal===null)throw Error("DOM.modal is null");E.Theme.init(),E.Route.init(h),window.addEventListener("popstate",function(){E.Route.onpopstate(h)}),h.headerButtonTheme.setAttribute("data-type",E.Theme.current),h.headerButtonTheme.addEventListener("click",E.Theme.onclick),h.headerPNav.firstElementChild.addEventListener("click",E.Nav.buttonNavOnclick),h.headerPNav.lastElementChild.addEventListener("focusout",E.Nav.navOnfocusout),h.view.addEventListener("click",function(u){E.View.onclick(u.target,h,u)}),h.heroTitle.addEventListener("click",function(u){E.Hero.DOMTitleOnclick(u.target,h,u)}),h.modal.addEventListener("click",function(u){E.Modal.onclick(u.target,h)}),h.modal.addEventListener("change",function(u){E.Modal.onchange(u.target,h)}),h.buttonMore.addEventListener("click",function(u){V(h)});var A=E.API.getTrending("all","1");A.then(function(u){console.info("trending: ",u)});var B=A.then(E.Hero.selectHero);B.then(function(u){console.info("hero: ",u)}),B.then(E.Hero.getHeroLogo).then(function(u){E.Hero.initDOMImgLogo(u,h.hero)}),B.then(function(u){if(u!==void 0)E.Hero.initDOM(u,h.hero)}),A.then(function(u){if(u?.results===void 0||u.results.length===0)throw Error("API.getTrending does not have data");var q=E.Collection.createDOMCollection("Week Trendings",u.results,"all",E.Collection.TRENDING,void 0,h.templateCollection.content),R=h.view.children[0];R.insertAdjacentElement("beforebegin",q),R.remove()}),E.API.getPopular("movie","1").then(function(u){if(console.info("getPopular movie",u),u?.results===void 0||u.results.length===0)throw Error("API.getDiscover does not have data");var q=E.Collection.createDOMCollection("Popular Movies",u.results,"movie",E.Collection.POPULAR,void 0,h.templateCollection.content),R=h.view.children[1];R.insertAdjacentElement("beforebegin",q),R.remove()}),E.API.getPopular("tv","1").then(function(u){if(console.info("getPopular tv",u),u?.results===void 0||u.results.length===0)throw Error("API.getDiscover does not have data");var q=E.Collection.createDOMCollection("Popular Tv Series",u.results,"tv",E.Collection.POPULAR,void 0,h.templateCollection.content),R=h.view.children[2];R.insertAdjacentElement("beforebegin",q),R.remove()}),E.API.getTopRated("movie","1").then(function(u){if(console.info("getTopRate movie",u),u?.results===void 0||u.results.length===0)throw Error("API.getTopRated does not have data");var q=E.Collection.createDOMCollection("Top Rated Movie",u.results,"movie",E.Collection.TOP_RATED,void 0,h.templateCollection.content),R=h.view.children[3];R.insertAdjacentElement("beforebegin",q),R.remove()}),E.API.getTopRated("tv","1").then(function(u){if(console.info("getTopRate tv",u),u?.results===void 0||u.results.length===0)throw Error("API.getTopRated does not have data");var q=E.Collection.createDOMCollection("Top Rated Tv Serie",u.results,"tv",E.Collection.TOP_RATED,void 0,h.templateCollection.content),R=h.view.children[4];R.insertAdjacentElement("beforebegin",q),R.remove()});var I=E.API.getGenres("movie"),K=E.API.getGenres("tv");Promise.all([I,K]).then(function(u){if(console.info("movie genres",u[0]),console.info("tv genres",u[1]),u[0]===void 0||u[0].genres===void 0||u[0].genres.length===0)throw Error("API.getGenre does not have data");if(u[1]===void 0||u[1].genres===void 0||u[1].genres.length===0)throw Error("API.getGenre does not have data");var q=u[0].genres,R=u[1].genres;if(b.tvGenres=R,b.movieGenres=q,q.length+R.length<b.MAX)b.len=q.length+R.length;else b.len=b.MAX;if(console.info("Collection:",b),h.buttonMore?.setAttribute("data-display","1"),q.length>1)E.Utils.randomPermutation(q);if(R.length>1)E.Utils.randomPermutation(R);var z,H,w,J,x=0,Q=0;for(let U=0;U<2;U+=1){if(Math.random()<0.5)H=q[x].id,w=q[x].name,z="movie",J=`${w} Movies`,x+=1,b.imov+=1;else H=R[Q].id,w=R[Q].name,z="tv",J=`${w} Tv Series`,Q+=1,b.itv+=1;E.View.discover(E.API.getDiscover(z,"1",H,void 0,void 0,void 0),J,z,H,U,5,h)}})});
