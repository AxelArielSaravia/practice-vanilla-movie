import b from"../general.js";var B=function(v,p,f){var T,E,I,y=u.genres,q=u.index;v.buttonMore?.setAttribute("data-display","0");var h=0,z=!1;if(u.count+p<u.len)h=u.count+p;else h=u.len,z=!0;if(f)for(var A=u.count;A<h;A+=1){var H=v.templateCollection.content.children[0].cloneNode(!0);v.view?.appendChild(H)}var J=v.view.children.length-h,w=u.count;while(w<h)T=y[q].id,E=y[q].name,I=`${E} Movies`,b.View.discover(b.API.getDiscover("movie",T,"1"),I,"movie",w,J,v),q+=1,w+=1;if(u.index=q,u.count=w,!z)v.buttonMore?.setAttribute("data-display","1")},u={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var v={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerButtonNav:document.getElementById("header_button-nav"),headerNav:document.getElementById("header_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(v.templateCollection===null)throw Error("DOM.templateCollection is null");if(v.templateModal===null)throw Error("DOM.templateModal is null");if(v.headerButtonNav===null)throw Error("DOM.headerButtonNav is null");if(v.headerNav===null)throw Error("DOM.headerNav is null");if(v.headerButtonSearch===null)throw Error("DOM.headerButtonSearch is null");if(v.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(v.main===null)throw Error("DOM.main is null");if(v.hero===null)throw Error("DOM.hero is null");if(v.view===null)throw Error("DOM.view is null");if(v.buttonMore===null)throw Error("DOM.buttonMore is null");if(v.modal===null)throw Error("DOM.modal is null");b.Theme.init(),b.Route.init(v),window.addEventListener("popstate",function(){b.Route.onpopstate(v)}),v.headerButtonTheme.setAttribute("data-type",b.Theme.current),v.headerButtonTheme.addEventListener("click",b.Theme.onclick),v.headerButtonNav.addEventListener("click",b.Nav.buttonNavOnclick),v.headerNav.addEventListener("focusout",b.Nav.navOnfocusout),v.view.addEventListener("click",function(E){b.View.onclick(E.target,v,E)}),v.hero.lastElementChild.addEventListener("click",function(E){b.Hero.DOMTitleOnclick(E.target,v,E)}),v.modal.addEventListener("click",function(E){b.Modal.onclick(E.target,v)}),v.modal.addEventListener("change",function(E){b.Modal.onchange(E.target,v)}),v.buttonMore.addEventListener("click",function(){B(v,u.STEPS,!0)});var p=b.API.getGenres("movie"),f=b.API.getTrending("movie","1");f.then(function(E){console.info("trending: ",E)});var T=f.then(b.Hero.selectHero);T.then(function(E){console.info("hero: ",E)}),T.then(b.Hero.getHeroLogo).then(function(E){b.Hero.initDOMImgLogo(E,v.hero)}),T.then(function(E){if(E!==void 0)b.Hero.initDOM(E,v.hero)}),f.then(function(E){if(E?.results===void 0||E.results.length===0)throw Error("API.getTrending does not have data");var I=b.Collection.createDOMCollection("Week Trendings",E.results,"movie",b.Collection.TRENDING,v.templateCollection.content),y=v.view.children[0];y.insertAdjacentElement("beforebegin",I),y.remove()}),b.API.getPopular("movie","1").then(function(E){if(console.info("getPopular movie",E),E?.results===void 0||E.results.length===0)throw Error("API.getDiscover does not have data");var I=b.Collection.createDOMCollection("Popular Movies",E.results,"movie",b.Collection.POPULAR,v.templateCollection.content),y=v.view.children[1];y.insertAdjacentElement("beforebegin",I),y.remove()}),b.API.getTopRated("movie","1").then(function(E){if(console.info("getTopRate movie",E),E?.results===void 0||E.results.length===0)throw Error("API.getTopRated does not have data");var I=b.Collection.createDOMCollection("Top rated movies",E.results,"movie",b.Collection.TOP_RATED,v.templateCollection.content),y=v.view.children[2];y.insertAdjacentElement("beforebegin",I),y.remove()}),p.then(function(E){if(E===void 0||E.genres===void 0||E.genres.length===0)throw Error("API.getGenre does not have data");u.genres=E.genres,u.len=E.genres.length,b.Utils.randomPermutation(u.genres),B(v,4,!1)})});
