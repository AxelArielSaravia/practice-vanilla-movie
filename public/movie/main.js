import I from"../general.js";import E from"../collection.js";var J=function(f,w,_){var H,u,h,T=p.genres,y=p.index;f.buttonMore?.setAttribute("data-display","0");var q=0,A=!1;if(p.count+w<p.len)q=p.count+w;else q=p.len,A=!0;if(_)for(var B=p.count;B<q;B+=1){var K=f.templateCollection.content.children[0].cloneNode(!0);f.view?.appendChild(K)}var Q=f.view.children.length-q,z=p.count;while(z<q)H=T[y].id,u=T[y].name,h=`${u} Movies`,E.View.discover(I.API.getDiscover("movie","1",H,void 0,void 0,void 0),h,"movie",H,z,Q,f),y+=1,z+=1;if(p.index=y,p.count=z,!A)f.buttonMore?.setAttribute("data-display","1")},p={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var f={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerSearch:document.getElementById("header_search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(f.templateCollection===null)throw Error("DOM.templateCollection is null");if(f.templateModal===null)throw Error("DOM.templateModal is null");if(f.headerPNav===null)throw Error("DOM.headerPNav is null");if(f.headerSearch===null)throw Error("DOM.headerSearch is null");if(f.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(f.main===null)throw Error("DOM.main is null");if(f.hero===null)throw Error("DOM.hero is null");if(f.heroTitle===null)throw Error("DOM.heroTitle is null");if(f.view===null)throw Error("DOM.view is null");if(f.buttonMore===null)throw Error("DOM.buttonMore is null");if(f.modal===null)throw Error("DOM.modal is null");I.Theme.init(),I.Route.init(f),window.addEventListener("popstate",function(){I.Route.onpopstate(f)}),f.headerButtonTheme.setAttribute("data-type",I.Theme.current),f.headerButtonTheme.addEventListener("click",I.Theme.onclick),f.headerPNav.firstElementChild.addEventListener("click",I.Nav.buttonNavOnclick),f.headerPNav.lastElementChild.addEventListener("focusout",I.Nav.navOnfocusout),f.headerSearch.children[1].addEventListener("click",function(u){f.headerSearch.reset()}),f.view.addEventListener("click",function(u){E.View.onclick(u.target,f,u)}),f.heroTitle.addEventListener("click",function(u){I.Hero.DOMTitleOnclick(u.target,f,u)}),f.modal.addEventListener("click",function(u){I.Modal.onclick(u.target,f)}),f.modal.addEventListener("change",function(u){I.Modal.onchange(u.target,f)}),f.buttonMore.addEventListener("click",function(){J(f,p.STEPS,!0)});var w=I.API.getGenres("movie"),_=I.API.getTrending("movie","1");_.then(function(u){console.info("trending: ",u)});var H=_.then(I.Hero.selectHero);H.then(function(u){console.info("hero: ",u)}),H.then(I.Hero.getHeroLogo).then(function(u){I.Hero.initDOMImgLogo(u,f.hero)}),H.then(function(u){if(u!==void 0)I.Hero.initDOM(u,f.hero)}),_.then(function(u){if(u?.results===void 0||u.results.length===0)throw Error("API.getTrending does not have data");var h=E.Collection.createDOMCollection("Week Trendings",u.results,"movie",E.Collection.TRENDING,void 0,f.templateCollection.content),T=f.view.children[0];T.insertAdjacentElement("beforebegin",h),T.remove()}),I.API.getPopular("movie","1").then(function(u){if(console.info("getPopular movie",u),u?.results===void 0||u.results.length===0)throw Error("API.getDiscover does not have data");var h=E.Collection.createDOMCollection("Popular Movies",u.results,"movie",E.Collection.POPULAR,void 0,f.templateCollection.content),T=f.view.children[1];T.insertAdjacentElement("beforebegin",h),T.remove()}),I.API.getTopRated("movie","1").then(function(u){if(console.info("getTopRate movie",u),u?.results===void 0||u.results.length===0)throw Error("API.getTopRated does not have data");var h=E.Collection.createDOMCollection("Top Rated Movies",u.results,"movie",E.Collection.TOP_RATED,void 0,f.templateCollection.content),T=f.view.children[2];T.insertAdjacentElement("beforebegin",h),T.remove()}),w.then(function(u){if(u===void 0||u.genres===void 0||u.genres.length===0)throw Error("API.getGenre does not have data");p.genres=u.genres,p.len=u.genres.length,I.Utils.randomPermutation(p.genres),J(f,4,!1)})});
