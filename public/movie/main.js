import p from"../general.js";import B from"../collection.js";var J=function(h,q,T){var E,I,w,u=f.genres,y=f.index;h.buttonMore?.setAttribute("data-display","0");var b=0,A=!1;if(f.count+q<f.len)b=f.count+q;else b=f.len,A=!0;if(T)for(var H=f.count;H<b;H+=1){var K=h.templateCollection.content.children[0].cloneNode(!0);h.view?.appendChild(K)}var L=h.view.children.length-b,z=f.count;while(z<b)E=u[y].id,I=u[y].name,w=`${I} Movies`,B.View.discover(p.API.getDiscover("movie","1",E,void 0,void 0,void 0),w,"movie",E,z,L,h),y+=1,z+=1;if(f.index=y,f.count=z,!A)h.buttonMore?.setAttribute("data-display","1")},f={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var h={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(h.templateCollection===null)throw Error("DOM.templateCollection is null");if(h.templateModal===null)throw Error("DOM.templateModal is null");if(h.headerPNav===null)throw Error("DOM.headerPNav is null");if(h.headerButtonSearch===null)throw Error("DOM.headerButtonSearch is null");if(h.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(h.main===null)throw Error("DOM.main is null");if(h.hero===null)throw Error("DOM.hero is null");if(h.heroTitle===null)throw Error("DOM.heroTitle is null");if(h.view===null)throw Error("DOM.view is null");if(h.buttonMore===null)throw Error("DOM.buttonMore is null");if(h.modal===null)throw Error("DOM.modal is null");p.Theme.init(),p.Route.init(h),window.addEventListener("popstate",function(){p.Route.onpopstate(h)}),h.headerButtonTheme.setAttribute("data-type",p.Theme.current),h.headerButtonTheme.addEventListener("click",p.Theme.onclick),h.headerPNav.firstElementChild.addEventListener("click",p.Nav.buttonNavOnclick),h.headerPNav.lastElementChild.addEventListener("focusout",p.Nav.navOnfocusout),h.view.addEventListener("click",function(I){B.View.onclick(I.target,h,I)}),h.heroTitle.addEventListener("click",function(I){p.Hero.DOMTitleOnclick(I.target,h,I)}),h.modal.addEventListener("click",function(I){p.Modal.onclick(I.target,h)}),h.modal.addEventListener("change",function(I){p.Modal.onchange(I.target,h)}),h.buttonMore.addEventListener("click",function(){J(h,f.STEPS,!0)});var q=p.API.getGenres("movie"),T=p.API.getTrending("movie","1");T.then(function(I){console.info("trending: ",I)});var E=T.then(p.Hero.selectHero);E.then(function(I){console.info("hero: ",I)}),E.then(p.Hero.getHeroLogo).then(function(I){p.Hero.initDOMImgLogo(I,h.hero)}),E.then(function(I){if(I!==void 0)p.Hero.initDOM(I,h.hero)}),T.then(function(I){if(I?.results===void 0||I.results.length===0)throw Error("API.getTrending does not have data");var w=B.Collection.createDOMCollection("Week Trendings",I.results,"movie",B.Collection.TRENDING,void 0,h.templateCollection.content),u=h.view.children[0];u.insertAdjacentElement("beforebegin",w),u.remove()}),p.API.getPopular("movie","1").then(function(I){if(console.info("getPopular movie",I),I?.results===void 0||I.results.length===0)throw Error("API.getDiscover does not have data");var w=B.Collection.createDOMCollection("Popular Movies",I.results,"movie",B.Collection.POPULAR,void 0,h.templateCollection.content),u=h.view.children[1];u.insertAdjacentElement("beforebegin",w),u.remove()}),p.API.getTopRated("movie","1").then(function(I){if(console.info("getTopRate movie",I),I?.results===void 0||I.results.length===0)throw Error("API.getTopRated does not have data");var w=B.Collection.createDOMCollection("Top Rated Movies",I.results,"movie",B.Collection.TOP_RATED,void 0,h.templateCollection.content),u=h.view.children[2];u.insertAdjacentElement("beforebegin",w),u.remove()}),q.then(function(I){if(I===void 0||I.genres===void 0||I.genres.length===0)throw Error("API.getGenre does not have data");f.genres=I.genres,f.len=I.genres.length,p.Utils.randomPermutation(f.genres),J(h,4,!1)})});
