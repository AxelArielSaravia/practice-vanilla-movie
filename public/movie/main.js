import I from"../general.js";import u from"../collection.js";var H=function(f,q,v){var A,E,p,h=T.genres,w=T.index;f.buttonMore?.setAttribute("data-display","0");var _=0,z=!1;if(T.count+q<T.len)_=T.count+q;else _=T.len,z=!0;if(v)for(var B=T.count;B<_;B+=1){var J=f.templateCollection.content.children[0].cloneNode(!0);f.view?.appendChild(J)}var K=f.view.children.length-_,y=T.count;while(y<_)A=h[w].id,E=h[w].name,p=`${E} Movies`,u.View.discover(I.API.getDiscover("movie","1",A,void 0,void 0,void 0),p,"movie",A,y,K,f),w+=1,y+=1;if(T.index=w,T.count=y,!z)f.buttonMore?.setAttribute("data-display","1")},T={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var f={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerSearch:document.getElementById("header_search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(f.templateCollection===null)throw Error("DOM.templateCollection is null");if(f.templateModal===null)throw Error("DOM.templateModal is null");if(f.headerPNav===null)throw Error("DOM.headerPNav is null");if(f.headerSearch===null)throw Error("DOM.headerSearch is null");if(f.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(f.main===null)throw Error("DOM.main is null");if(f.hero===null)throw Error("DOM.hero is null");if(f.heroTitle===null)throw Error("DOM.heroTitle is null");if(f.view===null)throw Error("DOM.view is null");if(f.buttonMore===null)throw Error("DOM.buttonMore is null");if(f.modal===null)throw Error("DOM.modal is null");I.Theme.init(),I.Route.init(f),window.addEventListener("popstate",function(){I.Route.onpopstate(f)}),f.headerButtonTheme.setAttribute("data-type",I.Theme.current),f.headerButtonTheme.addEventListener("click",I.Theme.onclick),f.headerPNav.firstElementChild.addEventListener("click",I.Nav.buttonNavOnclick),f.headerPNav.lastElementChild.addEventListener("focusout",I.Nav.navOnfocusout),f.headerSearch.children[1].addEventListener("click",function(E){f.headerSearch.reset()}),f.view.addEventListener("click",function(E){u.View.onclick(E.target,f,E)}),f.heroTitle.addEventListener("click",function(E){I.Hero.DOMTitleOnclick(E.target,f,E)}),f.modal.addEventListener("click",function(E){I.Modal.onclick(E.target,f)}),f.modal.addEventListener("change",function(E){I.Modal.onchange(E.target,f)}),f.buttonMore.addEventListener("click",function(){H(f,T.STEPS,!0)});var q=I.API.getGenres("movie"),v=I.API.getTrending("movie","1"),A=v.then(I.Hero.selectHero);A.then(I.Hero.getHeroLogo).then(function(E){I.Hero.initDOMImgLogo(E,f.hero)}),A.then(function(E){if(E!==void 0)I.Hero.initDOM(E,f.hero)}),v.then(function(E){if(E?.results===void 0||E.results.length===0)throw Error("API.getTrending does not have data");var p=u.Collection.createDOMCollection("Week Trendings",E.results,"movie",u.Collection.TRENDING,void 0,f.templateCollection.content),h=f.view.children[0];h.insertAdjacentElement("beforebegin",p),h.remove()}),I.API.getPopular("movie","1").then(function(E){if(E?.results===void 0||E.results.length===0)throw Error("API.getDiscover does not have data");var p=u.Collection.createDOMCollection("Popular Movies",E.results,"movie",u.Collection.POPULAR,void 0,f.templateCollection.content),h=f.view.children[1];h.insertAdjacentElement("beforebegin",p),h.remove()}),I.API.getTopRated("movie","1").then(function(E){if(E?.results===void 0||E.results.length===0)throw Error("API.getTopRated does not have data");var p=u.Collection.createDOMCollection("Top Rated Movies",E.results,"movie",u.Collection.TOP_RATED,void 0,f.templateCollection.content),h=f.view.children[2];h.insertAdjacentElement("beforebegin",p),h.remove()}),q.then(function(E){if(E===void 0||E.genres===void 0||E.genres.length===0)throw Error("API.getGenre does not have data");T.genres=E.genres,T.len=E.genres.length,I.Utils.randomPermutation(T.genres),H(f,4,!1)})});
