import T from"../general.js";var z=function(E,I,A){var y,R,p,h=u.genres,f=u.index;E.buttonMore?.setAttribute("data-display","0");var B=0,v=!1;if(u.count+I<u.len)B=u.count+I;else B=u.len,v=!0;if(A)for(var w=u.count;w<B;w+=1){var H=E.templateCollection.content.children[0].cloneNode(!0);E.view?.appendChild(H)}var J=E.view.children.length-B,q=u.count;while(q<B)y=h[f].id,R=h[f].name,p=`${R} Movies`,T.View.discover(T.API.getDiscover("movie","1",y,void 0,void 0,void 0),p,"movie",y,q,J,E),f+=1,q+=1;if(u.index=f,u.count=q,!v)E.buttonMore?.setAttribute("data-display","1")},u={STEPS:5,len:0,count:3,index:0,genres:null};window.addEventListener("DOMContentLoaded",function(){var E={templateCollection:document.getElementById("template_collection"),templateModal:document.getElementById("template_modal"),headerPNav:document.getElementById("header_p_nav"),headerButtonSearch:document.getElementById("header_button-search"),headerButtonTheme:document.getElementById("header_button-theme"),main:document.getElementById("main"),hero:document.getElementById("hero"),heroTitle:document.getElementById("hero-title"),view:document.getElementById("view"),buttonMore:document.getElementById("button-more"),modal:document.getElementById("modal")};if(E.templateCollection===null)throw Error("DOM.templateCollection is null");if(E.templateModal===null)throw Error("DOM.templateModal is null");if(E.headerPNav===null)throw Error("DOM.headerPNav is null");if(E.headerButtonSearch===null)throw Error("DOM.headerButtonSearch is null");if(E.headerButtonTheme===null)throw Error("DOM.headerButtonTheme is null");if(E.main===null)throw Error("DOM.main is null");if(E.hero===null)throw Error("DOM.hero is null");if(E.heroTitle===null)throw Error("DOM.heroTitle is null");if(E.view===null)throw Error("DOM.view is null");if(E.buttonMore===null)throw Error("DOM.buttonMore is null");if(E.modal===null)throw Error("DOM.modal is null");T.Theme.init(),T.Route.init(E),window.addEventListener("popstate",function(){T.Route.onpopstate(E)}),E.headerButtonTheme.setAttribute("data-type",T.Theme.current),E.headerButtonTheme.addEventListener("click",T.Theme.onclick),E.headerPNav.firstElementChild.addEventListener("click",T.Nav.buttonNavOnclick),E.headerPNav.lastElementChild.addEventListener("focusout",T.Nav.navOnfocusout),E.view.addEventListener("click",function(R){T.View.onclick(R.target,E,R)}),E.heroTitle.addEventListener("click",function(R){T.Hero.DOMTitleOnclick(R.target,E,R)}),E.modal.addEventListener("click",function(R){T.Modal.onclick(R.target,E)}),E.modal.addEventListener("change",function(R){T.Modal.onchange(R.target,E)}),E.buttonMore.addEventListener("click",function(){z(E,u.STEPS,!0)});var I=T.API.getGenres("movie"),A=T.API.getTrending("movie","1");A.then(function(R){console.info("trending: ",R)});var y=A.then(T.Hero.selectHero);y.then(function(R){console.info("hero: ",R)}),y.then(T.Hero.getHeroLogo).then(function(R){T.Hero.initDOMImgLogo(R,E.hero)}),y.then(function(R){if(R!==void 0)T.Hero.initDOM(R,E.hero)}),A.then(function(R){if(R?.results===void 0||R.results.length===0)throw Error("API.getTrending does not have data");var p=T.Collection.createDOMCollection("Week Trendings",R.results,"movie",T.Collection.TRENDING,void 0,E.templateCollection.content),h=E.view.children[0];h.insertAdjacentElement("beforebegin",p),h.remove()}),T.API.getPopular("movie","1").then(function(R){if(console.info("getPopular movie",R),R?.results===void 0||R.results.length===0)throw Error("API.getDiscover does not have data");var p=T.Collection.createDOMCollection("Popular Movies",R.results,"movie",T.Collection.POPULAR,void 0,E.templateCollection.content),h=E.view.children[1];h.insertAdjacentElement("beforebegin",p),h.remove()}),T.API.getTopRated("movie","1").then(function(R){if(console.info("getTopRate movie",R),R?.results===void 0||R.results.length===0)throw Error("API.getTopRated does not have data");var p=T.Collection.createDOMCollection("Top Rated Movies",R.results,"movie",T.Collection.TOP_RATED,void 0,E.templateCollection.content),h=E.view.children[2];h.insertAdjacentElement("beforebegin",p),h.remove()}),I.then(function(R){if(R===void 0||R.genres===void 0||R.genres.length===0)throw Error("API.getGenre does not have data");u.genres=R.genres,u.len=R.genres.length,T.Utils.randomPermutation(u.genres),z(E,4,!1)})});
